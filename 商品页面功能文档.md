# 宠物之家 - 商品页面功能文档

## 📖 文档概述

本文档详细介绍宠物之家平台的商品展示功能,包括商品列表页和商品详情页的功能说明、使用指南和技术实现。

---

## 🎯 功能概览

### 商品列表页 (`/products`)
展示所有商品的分类浏览页面,用户可以按分类查看商品,并进行购买、收藏等操作。

### 商品详情页 (`/product/:id`)
展示单个商品的详细信息,包括图片、规格、价格、评价等,用户可以选择规格并加入购物车。

---

## 📱 商品列表页

### 页面布局

```
┌─────────────────────────────────────────────┐
│  分类导航: 宠物食品 | 宠物用品 | 宠物玩具 | 限时特惠  │
├─────────────────────────────────────────────┤
│              轮播图 Banner                    │
├─────────────────────────────────────────────┤
│  特色服务: 快速配送 | 正品保证 | 专业客服 | 无忧退换  │
├─────────────────────────────────────────────┤
│  🔥 热门推荐                                  │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐        │
│  │商品1│ │商品2│ │商品3│ │商品4│ │商品5│        │
│  └────┘ └────┘ └────┘ └────┘ └────┘        │
├─────────────────────────────────────────────┤
│  🍖 宠物食品                                  │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐        │
│  │商品1│ │商品2│ │商品3│ │商品4│ │商品5│        │
│  └────┘ └────┘ └────┘ └────┘ └────┘        │
├─────────────────────────────────────────────┤
│  💡 养宠小贴士                                │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐   │
│  │如何选择食品│ │日常护理  │ │健康检查  │   │
│  └──────────┘ └──────────┘ └──────────┘   │
├─────────────────────────────────────────────┤
│  🏠 宠物用品                                  │
│  🎾 宠物玩具                                  │
└─────────────────────────────────────────────┘
```

### 功能模块

#### 1. 分类导航
**位置**: 页面顶部  
**功能**: 快速切换商品分类  
**分类**:
- 🍖 宠物食品 - 各类宠物主粮、零食、营养品
- 🏠 宠物用品 - 宠物日常用品、护理用品
- 🎾 宠物玩具 - 各类宠物玩具、互动用品
- 🔥 限时特惠 - 热销商品推荐

**交互**:
- 点击分类标签切换当前分类
- 当前分类高亮显示
- 平滑滚动到对应区域

#### 2. 轮播图
**位置**: 分类导航下方  
**功能**: 展示活动宣传图  
**尺寸**: 1200x400px  
**特点**: 
- 圆角边框
- 阴影效果
- 响应式适配

#### 3. 特色服务横幅
**位置**: 轮播图下方  
**功能**: 展示平台特色服务  
**服务项**:
- 🚚 快速配送 - 满99元免运费
- 🛡️ 正品保证 - 100%官方授权
- 🎧 专业客服 - 养宠问题解答
- 🔄 无忧退换 - 30天无忧退货

**样式**:
- 圆形图标
- 橙黄色主题
- 虚线边框

#### 4. 商品展示区

##### 热门推荐
**数量**: 5个商品  
**排序**: 按销量降序  
**筛选**: is_hot = 1

##### 宠物食品
**数量**: 5个商品  
**分类**: category_id = 1  
**品牌**: 皇家、冠能、渴望、比瑞吉等

##### 宠物用品
**数量**: 5个商品  
**分类**: category_id = 2  
**类型**: 智能设备、日用品、护理用品

##### 宠物玩具
**数量**: 5个商品  
**分类**: category_id = 3  
**类型**: 互动玩具、益智玩具、运动玩具

#### 5. 商品卡片

**卡片结构**:
```
┌─────────────────┐
│   [商品图片]     │ ← 220px高度
│   [热销标签]     │ ← 左上角标签
├─────────────────┤
│ 商品名称         │ ← 2行文字
│ ¥128.00 ¥158.00 │ ← 现价 原价
│ ★★★★☆ (1250)   │ ← 评分 评价数
│ [加入购物车] ♡   │ ← 操作按钮
└─────────────────┘
```

**卡片信息**:
- 商品图片 (220x220px)
- 商品标签 (热销/新品/进口等)
- 商品名称 (最多2行)
- 当前价格 (橙色大字)
- 原价 (删除线)
- 评分星级 (1-5星)
- 评价数量
- 销量数据

**交互效果**:
- 悬停: 卡片上移10px,阴影加深
- 图片: 悬停时缩放1.08倍
- 点击卡片: 跳转商品详情页
- 点击购物车: 添加到购物车并提示
- 点击爱心: 添加/取消收藏

#### 6. 养宠小贴士
**位置**: 宠物食品和宠物用品之间  
**功能**: 提供养宠知识  
**内容**:
- 如何选择宠物食品
- 宠物日常护理
- 宠物健康检查

**样式**:
- 3列网格布局
- 白色卡片
- 橙色标题
- 悬停上移效果

#### 7. 回到顶部按钮
**位置**: 右下角固定  
**显示条件**: 滚动超过300px  
**功能**: 平滑滚动到页面顶部  
**样式**: 圆形橙色按钮,悬停上移

#### 8. 通知提示
**位置**: 右上角固定  
**触发时机**:
- 添加购物车成功
- 添加/取消收藏
- 数据加载失败

**样式**:
- 橙色渐变背景
- 白色文字
- 3秒后自动消失
- 滑入/淡出动画

---

## 🛍️ 商品详情页

### 页面布局

```
┌─────────────────────────────────────────────┐
│  ┌──────────┐  商品名称                      │
│  │          │  品牌: 皇家                     │
│  │  主图    │  ¥128.00  ¥158.00  9折         │
│  │          │  ★★★★☆ 4.7分 (6729条评价)     │
│  └──────────┘                                │
│  [缩略图1][2][3][4]                          │
│                                              │
│  规格选择:                                   │
│  尺寸: ○2kg ○5kg ○10kg                      │
│  颜色: ○原味 ○鸡肉味                        │
│  数量: [-] 1 [+]                            │
│                                              │
│  [立即购买] [加入购物车] [收藏]              │
├─────────────────────────────────────────────┤
│  商品详情 | 规格参数 | 用户评价 | 常见问题    │
├─────────────────────────────────────────────┤
│  详细描述内容...                             │
├─────────────────────────────────────────────┤
│  推荐商品                                    │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐              │
│  │商品1│ │商品2│ │商品3│ │商品4│              │
│  └────┘ └────┘ └────┘ └────┘              │
└─────────────────────────────────────────────┘
```

### 功能模块

#### 1. 图片画廊
**主图区域**:
- 尺寸: 500x500px
- 支持点击放大
- 高清图片展示

**缩略图区域**:
- 4-6张缩略图
- 点击切换主图
- 当前图片高亮边框

**交互**:
- 鼠标悬停预览
- 点击切换
- 平滑过渡动画

#### 2. 商品基本信息
**商品名称**: 
- 大号字体
- 粗体显示
- 最多2行

**品牌信息**:
- 品牌名称
- 品牌图标(可选)

**价格信息**:
- 当前价格: 大号橙色
- 原价: 删除线灰色
- 折扣标签: 红色背景

**评分信息**:
- 星级评分 (1-5星)
- 平均分数
- 评价数量
- 点击查看评价

#### 3. 规格选择

**尺寸选择**:
```javascript
规格: [
  { id: 1, name: '2kg', price: 128.00, stock: 100 },
  { id: 2, name: '5kg', price: 298.00, stock: 50 },
  { id: 3, name: '10kg', price: 568.00, stock: 30 }
]
```

**颜色选择**:
```javascript
颜色: [
  { id: 1, name: '原味', available: true },
  { id: 2, name: '鸡肉味', available: true },
  { id: 3, name: '牛肉味', available: false }
]
```

**数量选择**:
- 最小值: 1
- 最大值: 库存数量
- 步进: 1
- 加减按钮

**价格计算**:
```
总价 = 单价 × 数量
折扣价 = 原价 × 折扣
节省 = 原价 - 折扣价
```

#### 4. 操作按钮

**立即购买**:
- 橙色主按钮
- 点击跳转结算页
- 需要登录

**加入购物车**:
- 橙色边框按钮
- 添加到购物车
- 显示成功提示

**收藏商品**:
- 爱心图标按钮
- 切换收藏状态
- 需要登录

#### 5. 详情标签页

**商品详情**:
- 商品描述
- 产品特点
- 使用说明
- 注意事项

**规格参数**:
```
品牌: 皇家
产地: 法国
净含量: 2kg
保质期: 18个月
适用对象: 成犬
主要成分: 鸡肉、大米、玉米
营养成分: 蛋白质≥26%, 脂肪≥14%
```

**用户评价**:
- 评价列表
- 评分筛选
- 图片评价
- 追加评价
- 商家回复

**常见问题**:
- FAQ列表
- 折叠展开
- 搜索功能

#### 6. 推荐商品
**位置**: 页面底部  
**数量**: 4个商品  
**逻辑**: 同分类热销商品  
**样式**: 横向滚动卡片

---

## 🔌 API接口

### 1. 获取商品列表

**接口地址**: `GET /api/products`

**请求参数**:
```javascript
{
  category: 'hot',  // 分类: hot/food/supply/toy
  limit: 5          // 返回数量
}
```

**响应数据**:
```javascript
{
  code: 200,
  message: "操作成功",
  data: [
    {
      id: 1,
      name: "皇家小型犬成犬粮 2kg",
      brand: "皇家",
      price: 124.87,
      originalPrice: 140.07,
      rating: 4.7,
      ratingCount: 6729,
      image: "https://xxx.com/food_1.jpg",
      tag: "热销",
      sales: 33249
    }
  ]
}
```

### 2. 获取商品详情

**接口地址**: `GET /api/products/:id`

**请求参数**:
```javascript
{
  id: 1  // 商品ID
}
```

**响应数据**:
```javascript
{
  code: 200,
  message: "操作成功",
  data: {
    id: 1,
    name: "皇家小型犬成犬粮 2kg",
    brand: "皇家",
    description: "详细描述...",
    price: 124.87,
    originalPrice: 140.07,
    discount: 10,
    stock: 1907,
    sales: 33249,
    rating: 4.7,
    ratingCount: 6729,
    images: [
      "https://xxx.com/food_1_1.jpg",
      "https://xxx.com/food_1_2.jpg"
    ],
    specifications: [
      { name: "2kg", price: 124.87, stock: 100 },
      { name: "5kg", price: 298.00, stock: 50 }
    ],
    reviews: [...],
    faqs: [...]
  }
}
```

### 3. 获取推荐商品

**接口地址**: `GET /api/products/:id/recommended`

**请求参数**:
```javascript
{
  id: 1,      // 当前商品ID
  limit: 4    // 返回数量
}
```

### 4. 添加到购物车

**接口地址**: `POST /api/cart/add`

**请求数据**:
```javascript
{
  productId: 1,
  specId: 1,
  quantity: 2
}
```

**响应数据**:
```javascript
{
  code: 200,
  message: "添加成功",
  data: {
    cartId: 123,
    totalItems: 5,
    totalAmount: 256.00
  }
}
```

---

## 🎨 样式设计

### 颜色方案

**主色调**:
```css
--primary-color: #FFB347;      /* 橙色 */
--primary-dark: #E69500;       /* 深橙色 */
--primary-light: #FFCC80;      /* 浅橙色 */
```

**背景色**:
```css
--bg-primary: #FFFAF0;         /* 浅米色 */
--bg-secondary: #FFF8E1;       /* 浅黄色 */
--bg-white: #FFFFFF;           /* 白色 */
```

**文字色**:
```css
--text-primary: #5A4A42;       /* 深棕色 */
ary: #8D6E63;     /* 棕色 */
--text-light: #BCAAA4;         /* 浅棕色 */
```

**功能色**:
```css
--success: #4CAF50;            /* 成功-绿色 */
--warning: #FF9800;            /* 警告-橙色 */
--error: #F44336;              /* 错误-红色 */
--info: #2196F3;               /* 信息-蓝色 */
```

### 字体规范

**字体家族**:
```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
             'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 
             sans-serif;
```

**字号规范**:
```css
--font-xs: 12px;    /* 辅助文字 */
--font-sm: 14px;    /* 正文小字 */
--font-md: 16px;    /* 正文 */
--font-lg: 18px;    /* 小标题 */
--font-xl: 22px;    /* 价格/标题 */
--font-2xl: 24px;   /* 大标题 */
```

### 间距规范

```css
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
--spacing-2xl: 48px;
```

### 圆角规范

```css
--radius-sm: 4px;    /* 小圆角 */
--radius-md: 8px;    /* 中圆角 */
--radius-lg: 12px;   /* 大圆角 */
--radius-xl: 16px;   /* 超大圆角 */
--radius-full: 50%;  /* 圆形 */
```

### 阴影规范

```css
--shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
--shadow-md: 0 4px 8px rgba(0,0,0,0.12);
--shadow-lg: 0 8px 16px rgba(0,0,0,0.15);
--shadow-xl: 0 12px 24px rgba(0,0,0,0.18);
```

---

## 📱 响应式设计

### 断点设置

```css
/* 超小屏幕 (手机竖屏) */
@media (max-width: 576px) {
  .product-grid { grid-template-columns: 1fr; }
}

/* 小屏幕 (手机横屏) */
@media (max-width: 768px) {
  .product-grid { grid-template-columns: repeat(2, 1fr); }
}

/* 中等屏幕 (平板) */
@media (max-width: 992px) {
  .product-grid { grid-template-columns: repeat(3, 1fr); }
}

/* 大屏幕 (小笔记本) */
@media (max-width: 1200px) {
  .product-grid { grid-template-columns: repeat(4, 1fr); }
}

/* 超大屏幕 (桌面) */
@media (min-width: 1201px) {
  .product-grid { grid-template-columns: repeat(5, 1fr); }
}
```

### 移动端优化

**导航栏**:
- 汉堡菜单
- 底部固定导航
- 搜索框折叠

**商品卡片**:
- 单列布局
- 图片自适应
- 按钮全宽

**详情页**:
- 图片全宽
- 规格选择器优化
- 操作按钮固定底部

---

## ⚡ 性能优化

### 图片优化
1. **懒加载**: 滚动到可视区域再加载
2. **CDN加速**: 使用阿里云OSS
3. **格式优化**: WebP格式优先
4. **尺寸适配**: 根据设备加载不同尺寸

### 代码优化
1. **组件懒加载**: 路由级别代码分割
2. **防抖节流**: 搜索、滚动事件优化
3. **虚拟滚动**: 大量商品时使用
4. **缓存策略**: LocalStorage缓存数据

### 网络优化
1. **HTTP/2**: 多路复用
2. **Gzip压缩**: 减小传输体积
3. **预加载**: 关键资源预加载
4. **DNS预解析**: 减少DNS查询时间

---

## 🔒 安全措施

### 前端安全
1. **XSS防护**: 输入内容转义
2. **CSRF防护**: Token验证
3. **敏感信息**: 不在前端存储
4. **HTTPS**: 全站HTTPS

### 后端安全
1. **SQL注入**: 参数化查询
2. **权限验证**: JWT Token
3. **数据验证**: 后端二次验证
4. **限流**: 防止恶意请求

---

## 📊 数据统计

### 商品数据
- 总商品数: 30个
- 宠物食品: 10个
- 宠物用品: 10个
- 宠物玩具: 10个
- 热门商品: 17个

### 价格区间
- 最低价: ¥15.43 (宠物拔河绳)
- 最高价: ¥519.11 (智能喂食器)
- 平均价: ¥180.50

### 评分分布
- 5.0分: 3个商品
- 4.9分: 7个商品
- 4.8分: 4个商品
- 4.7分: 6个商品
- 4.6分: 6个商品
- 4.5分: 4个商品

---

## 🚀 使用指南

### 用户操作流程

#### 浏览商品
1. 访问商品列表页 `/products`
2. 选择感兴趣的分类
3. 浏览商品卡片
4. 点击商品查看详情

#### 购买商品
1. 在详情页选择规格
2. 选择数量
3. 点击"加入购物车"或"立即购买"
4. 跳转到购物车/结算页

#### 收藏商品
1. 点击商品卡片的爱心图标
2. 或在详情页点击"收藏"按钮
3. 在个人中心查看收藏

---

## 🛠️ 开发指南

### 本地开发

**启动前端**:
```bash
cd my-pet-platform
npm install
npm run dev
```

**启动后端**:
```bash
cd backend
./mvnw spring-boot:run
```

**访问地址**:
- 前端: http://localhost:5173
- 后端: http://localhost:8080
- 商品列表: http://localhost:5173/products
- 商品详情: http://localhost:5173/product/1

### 添加新商品

**数据库插入**:
```sql
INSERT INTO products (
  category_id, name, brand, price, 
  original_price, stock, sales, rating, 
  rating_count, image_url, tag, is_hot
) VALUES (
  1, '新商品名称', '品牌', 99.00, 
  129.00, 100, 0, 5.00, 
  0, 'https://xxx.com/image.jpg', '新品', 0
);
```

### 修改商品分类

**修改分类代码**:
```javascript
// ProductListView.vue
const categories = [
  { id: 'food', name: '宠物食品', icon: 'fas fa-bone' },
  { id: 'supply', name: '宠物用品', icon: 'fas fa-utensils' },
  { id: 'toy', name: '宠物玩具', icon: 'fas fa-baseball-ball' },
  { id: 'new', name: '新分类', icon: 'fas fa-star' }  // 新增
]
```

**修改后端Service**:
```java
// ProductServiceImpl.java
case "new":
    products = productMapper.findByCategoryId(4, limit);
    break;
```

---

## 📞 技术支持

### 常见问题

**Q: 商品图片不显示?**  
A: 检查图片URL是否正确,确认OSS服务正常

**Q: 价格显示错误?**  
A: 检查数据库price字段类型为decimal(10,2)

**Q: 添加购物车失败?**  
A: 检查是否登录,查看后端日志

**Q: 评分星级不显示?**  
A: 检查Font Awesome图标库是否加载

### 联系方式

- 技术文档: 查看项目根目录文档
- 问题反馈: 提交Issue
- 开发团队: 查看README.md

---

**文档版本**: v1.0  
**最后更新**: 2025-12-21  
**维护人员**: 开发团队
