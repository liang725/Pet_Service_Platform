import{_ as H,u as J,r as _,a as S,c as M,o as K,b as Q,d as l,e as s,f as i,g as W,t as f,h as n,w as E,i as p,v as h,n as w,j as V,k as x,l as y,m as X,p as t}from"./index-D7KbY98F.js";const Y={class:"auth-view"},Z={class:"paw-print"},ss={class:"paw-print"},es={class:"paw-print"},rs={class:"paw-print"},os={class:"container"},as={class:"welcome-section"},is={class:"logo"},ts={class:"logo-icon"},ls={class:"welcome-title"},ns={class:"welcome-text"},cs={class:"features"},ds={key:0,class:"feature"},us={key:1,class:"feature"},ms={key:2,class:"feature"},fs={key:3,class:"feature"},ps={key:4,class:"feature"},ws={key:5,class:"feature"},gs={class:"pet-dog"},vs={class:"pet-cat"},_s={class:"form-section"},Es={key:0,class:"form-container login-form"},hs={class:"form-group"},ys={class:"input-with-icon"},bs={class:"input-icon"},ks={key:0,class:"error-message"},Ps={class:"form-group"},Ss={class:"input-with-icon"},Ms=["type"],Vs={class:"input-icon"},xs={key:0,class:"error-message"},Us=["disabled"],Rs={class:"switch-form"},Is={key:1,class:"form-container register-form"},Ls={class:"form-row"},Cs={class:"form-group form-group-half"},qs={class:"input-with-icon"},Bs={class:"input-icon"},Ts={key:0,class:"error-message"},Ds={class:"form-group form-group-half"},Fs={class:"input-with-icon"},Ns={class:"input-icon"},js={key:0,class:"error-message"},As={class:"form-row"},Os={class:"form-group form-group-half"},zs={class:"input-with-icon"},$s=["type"],Gs={class:"input-icon"},Hs={key:0,class:"error-message"},Js={class:"form-group form-group-half"},Ks={class:"input-with-icon"},Qs={class:"input-icon"},Ws={key:0,class:"error-message"},Xs=["disabled"],Ys={class:"switch-form"},Zs={__name:"AuthView",setup(se){const k=X(),U=Q(),b=J(),c=_(!1),g=_(!1),v=_(!1),d=_(!0),o=S({username:"",password:"",remember:!1,usernameError:!1,usernameSuccess:!1,passwordError:!1,passwordSuccess:!1}),e=S({username:"",email:"",password:"",confirmPassword:"",usernameError:!1,usernameSuccess:!1,usernameErrorMsg:"",emailError:!1,emailSuccess:!1,emailErrorMsg:"",passwordError:!1,passwordSuccess:!1,passwordErrorMsg:"",confirmPasswordError:!1,confirmPasswordSuccess:!1,confirmPasswordErrorMsg:""}),R=M(()=>c.value?"登录中...":"登录"),I=M(()=>c.value?"注册中...":"立即注册"),L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;K(()=>{U.query.mode==="register"&&(d.value=!1)});const C=()=>{d.value=!1,q()},P=()=>{d.value=!0,B()},q=()=>{Object.assign(o,{username:"",password:"",remember:!1,usernameError:!1,usernameSuccess:!1,passwordError:!1,passwordSuccess:!1}),g.value=!1},B=()=>{Object.assign(e,{username:"",email:"",password:"",confirmPassword:"",usernameError:!1,usernameSuccess:!1,usernameErrorMsg:"",emailError:!1,emailSuccess:!1,emailErrorMsg:"",passwordError:!1,passwordSuccess:!1,passwordErrorMsg:"",confirmPasswordError:!1,confirmPasswordSuccess:!1,confirmPasswordErrorMsg:""}),v.value=!1},T=()=>{g.value=!g.value},D=()=>{v.value=!v.value},F=()=>{o.usernameError=!1},N=()=>{o.passwordError=!1},j=()=>{e.usernameError=!1,e.usernameErrorMsg=""},A=()=>{e.emailError=!1,e.emailErrorMsg=""},O=()=>{e.passwordError=!1,e.passwordErrorMsg=""},z=()=>{e.confirmPasswordError=!1,e.confirmPasswordErrorMsg=""},$=async()=>{let m=!0;if(o.username.trim()?(o.usernameError=!1,o.usernameSuccess=!0):(o.usernameError=!0,o.usernameSuccess=!1,m=!1),o.password.length<6?(o.passwordError=!0,o.passwordSuccess=!1,m=!1):(o.passwordError=!1,o.passwordSuccess=!0),!!m){c.value=!0;try{const r={username:o.username,password:o.password},a=await b.login(r,o.remember);a.success?(c.value=!1,b.isAdmin?k.push("/admin"):k.push("/")):(alert(a.message||"登录失败，请检查用户名和密码"),c.value=!1)}catch(r){alert(r.message||"登录失败，请检查用户名和密码"),c.value=!1}}},G=async()=>{let m=!0;if(e.username.trim().length<3||e.username.trim().length>50?(e.usernameError=!0,e.usernameSuccess=!1,e.usernameErrorMsg="用户名长度必须在3-50个字符之间",m=!1):(e.usernameError=!1,e.usernameSuccess=!0),!e.email.trim()||!L.test(e.email)?(e.emailError=!0,e.emailSuccess=!1,e.emailErrorMsg="请输入有效的邮箱地址",m=!1):(e.emailError=!1,e.emailSuccess=!0),e.password.length<6?(e.passwordError=!0,e.passwordSuccess=!1,e.passwordErrorMsg="密码长度不能少于6个字符",m=!1):(e.passwordError=!1,e.passwordSuccess=!0),e.confirmPassword!==e.password?(e.confirmPasswordError=!0,e.confirmPasswordSuccess=!1,e.confirmPasswordErrorMsg="两次输入的密码不一致",m=!1):(e.confirmPasswordError=!1,e.confirmPasswordSuccess=!0),!!m){c.value=!0;try{const r={username:e.username,password:e.password,nickname:e.username,email:e.email};await b.register(r),alert("注册成功！请登录您的账户"),P(),c.value=!1}catch(r){alert(r.message||"注册失败，请重试"),c.value=!1}}};return(m,r)=>{const a=W("Icon");return t(),l("div",Y,[s("div",Z,[i(a,{icon:"mdi:paw"})]),s("div",ss,[i(a,{icon:"mdi:paw"})]),s("div",es,[i(a,{icon:"mdi:paw"})]),s("div",rs,[i(a,{icon:"mdi:paw"})]),s("div",os,[s("div",as,[s("div",is,[s("div",ts,[i(a,{icon:"mdi:paw"})]),r[6]||(r[6]=s("div",{class:"logo-text"},"宠物之家",-1))]),s("h1",ls,f(d.value?"欢迎来到宠物之家":"加入宠物之家"),1),s("p",ns,f(d.value?"在这里，我们为您的宠物提供最温馨的家。无论您是宠物主人还是宠物爱好者，都可以在这里找到归属感。":"创建您的专属账户，开启美好的宠物之旅。在这里，您可以为您的爱宠找到最贴心的服务和最温暖的社区。"),1),s("div",cs,[d.value?(t(),l("div",ds,[i(a,{icon:"mdi:check-circle",class:"feature-check"}),r[7]||(r[7]=s("span",null,"专业宠物健康咨询",-1))])):n("",!0),d.value?(t(),l("div",us,[i(a,{icon:"mdi:check-circle",class:"feature-check"}),r[8]||(r[8]=s("span",null,"预约洗护服务",-1))])):n("",!0),d.value?(t(),l("div",ms,[i(a,{icon:"mdi:check-circle",class:"feature-check"}),r[9]||(r[9]=s("span",null,"宠物商城购物",-1))])):n("",!0),d.value?n("",!0):(t(),l("div",fs,[i(a,{icon:"mdi:heart",class:"feature-icon"}),r[10]||(r[10]=s("span",null,"专业的宠物护理服务",-1))])),d.value?n("",!0):(t(),l("div",ps,[i(a,{icon:"mdi:account-group",class:"feature-icon"}),r[11]||(r[11]=s("span",null,"个人宠物档案管理",-1))])),d.value?n("",!0):(t(),l("div",ws,[i(a,{icon:"mdi:cart",class:"feature-icon"}),r[12]||(r[12]=s("span",null,"优质的宠物用品商城",-1))]))]),s("div",gs,[i(a,{icon:"mdi:dog"})]),s("div",vs,[i(a,{icon:"mdi:cat"})])]),s("div",_s,[d.value?(t(),l("div",Es,[r[16]||(r[16]=s("h2",{class:"form-title"},"欢迎来到宠物之家",-1)),r[17]||(r[17]=s("p",{class:"form-subtitle"},"请登录您的账户继续使用宠物之家",-1)),s("form",{onSubmit:E($,["prevent"])},[s("div",hs,[r[13]||(r[13]=s("label",{class:"form-label",for:"loginUsername"},"用户名",-1)),s("div",ys,[p(s("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>o.username=u),type:"text",id:"loginUsername",class:w(["form-input",{error:o.usernameError,success:o.usernameSuccess}]),placeholder:"请输入您的用户名",required:"",onInput:F},null,34),[[h,o.username]]),s("div",bs,[i(a,{icon:"mdi:account"})])]),o.usernameError?(t(),l("div",ks,"请输入用户名")):n("",!0)]),s("div",Ps,[r[14]||(r[14]=s("label",{class:"form-label",for:"loginPassword"},"密码",-1)),s("div",Ss,[p(s("input",{"onUpdate:modelValue":r[1]||(r[1]=u=>o.password=u),type:g.value?"text":"password",id:"loginPassword",class:w(["form-input",{error:o.passwordError,success:o.passwordSuccess}]),placeholder:"请输入您的密码",required:"",onInput:N},null,42,Ms),[[V,o.password]]),s("div",Vs,[i(a,{icon:"mdi:lock"})]),s("div",{class:"toggle-password",onClick:T},[i(a,{icon:g.value?"mdi:eye-off":"mdi:eye"},null,8,["icon"])])]),o.passwordError?(t(),l("div",xs,"密码不能少于6个字符")):n("",!0)]),s("button",{type:"submit",class:"submit-btn",disabled:c.value},[c.value?(t(),x(a,{key:0,icon:"mdi:loading",class:"spinner",spin:""})):n("",!0),y(" "+f(R.value),1)],8,Us)],32),s("div",Rs,[r[15]||(r[15]=y(" 还没有账户？ ",-1)),s("a",{href:"#",class:"register-link",onClick:E(C,["prevent"])},"立即注册")])])):(t(),l("div",Is,[r[23]||(r[23]=s("h2",{class:"form-title"},"创建新账户",-1)),r[24]||(r[24]=s("p",{class:"form-subtitle"},"填写以下信息完成注册",-1)),s("form",{onSubmit:E(G,["prevent"]),class:"register-form-content"},[s("div",Ls,[s("div",Cs,[r[18]||(r[18]=s("label",{class:"form-label",for:"registerUsername"},"用户名 *",-1)),s("div",qs,[p(s("input",{"onUpdate:modelValue":r[2]||(r[2]=u=>e.username=u),type:"text",id:"registerUsername",class:w(["form-input",{error:e.usernameError,success:e.usernameSuccess}]),placeholder:"用户名（3-50字符）",required:"",onInput:j},null,34),[[h,e.username]]),s("div",Bs,[i(a,{icon:"mdi:account"})])]),e.usernameError?(t(),l("div",Ts,f(e.usernameErrorMsg),1)):n("",!0)]),s("div",Ds,[r[19]||(r[19]=s("label",{class:"form-label",for:"registerEmail"},"电子邮箱 *",-1)),s("div",Fs,[p(s("input",{"onUpdate:modelValue":r[3]||(r[3]=u=>e.email=u),type:"email",id:"registerEmail",class:w(["form-input",{error:e.emailError,success:e.emailSuccess}]),placeholder:"邮箱地址",required:"",onInput:A},null,34),[[h,e.email]]),s("div",Ns,[i(a,{icon:"mdi:email"})])]),e.emailError?(t(),l("div",js,f(e.emailErrorMsg),1)):n("",!0)])]),s("div",As,[s("div",Os,[r[20]||(r[20]=s("label",{class:"form-label",for:"registerPassword"},"密码 *",-1)),s("div",zs,[p(s("input",{"onUpdate:modelValue":r[4]||(r[4]=u=>e.password=u),type:v.value?"text":"password",id:"registerPassword",class:w(["form-input",{error:e.passwordError,success:e.passwordSuccess}]),placeholder:"密码（至少6位）",required:"",onInput:O},null,42,$s),[[V,e.password]]),s("div",Gs,[i(a,{icon:"mdi:lock"})]),s("div",{class:"toggle-password",onClick:D},[i(a,{icon:v.value?"mdi:eye-off":"mdi:eye"},null,8,["icon"])])]),e.passwordError?(t(),l("div",Hs,f(e.passwordErrorMsg),1)):n("",!0)]),s("div",Js,[r[21]||(r[21]=s("label",{class:"form-label",for:"confirmPassword"},"确认密码 *",-1)),s("div",Ks,[p(s("input",{"onUpdate:modelValue":r[5]||(r[5]=u=>e.confirmPassword=u),type:"password",id:"confirmPassword",class:w(["form-input",{error:e.confirmPasswordError,success:e.confirmPasswordSuccess}]),placeholder:"确认密码",required:"",onInput:z},null,34),[[h,e.confirmPassword]]),s("div",Qs,[i(a,{icon:"mdi:lock-check"})])]),e.confirmPasswordError?(t(),l("div",Ws,f(e.confirmPasswordErrorMsg),1)):n("",!0)])]),s("button",{type:"submit",class:"submit-btn",disabled:c.value},[c.value?(t(),x(a,{key:0,icon:"mdi:loading",class:"spinner",spin:""})):n("",!0),y(" "+f(I.value),1)],8,Xs)],32),s("div",Ys,[r[22]||(r[22]=y(" 已有账户？ ",-1)),s("a",{href:"#",class:"link",onClick:E(P,["prevent"])},"立即登录")])]))])])])}}},re=H(Zs,[["__scopeId","data-v-bc742275"]]);export{re as default};
