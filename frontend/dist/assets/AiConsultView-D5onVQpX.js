import{_ as p,d as i,e as s,G as h,h as d,F as c,s as g,i as m,v,I as f,N as _,O as M,p as o,t as b,n as u}from"./index-D7KbY98F.js";const y={name:"AiConsultView",data(){return{inputMessage:"",messages:[],loading:!1,suggestions:["å¦‚ä½•ç»™çŒ«å’ªé€‰æ‹©åˆé€‚çš„çŒ«ç²®ï¼Ÿ","ç‹—ç‹—ä¸åƒä¸œè¥¿æ€ä¹ˆåŠï¼Ÿ","æ–°æ‰‹å…»çŒ«éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ","å¦‚ä½•è®­ç»ƒç‹—ç‹—å®šç‚¹å¤§å°ä¾¿ï¼Ÿ"]}},async mounted(){await this.loadSuggestions()},methods:{async loadSuggestions(){try{const t=await M();t.code===200&&t.data&&(this.suggestions=t.data)}catch(t){console.error("åŠ è½½æ¨èé—®é¢˜å¤±è´¥",t)}},askQuestion(t){this.inputMessage=t,this.sendMessage()},async sendMessage(){const t=this.inputMessage.trim();if(!(!t||this.loading)){this.messages.push({role:"user",content:t}),this.inputMessage="",this.scrollToBottom(),this.loading=!0;try{const e=await _(t);e.code===200&&e.data?this.messages.push({role:"assistant",content:e.data.reply}):this.messages.push({role:"assistant",content:e.message||"æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å›ç­”ï¼Œè¯·ç¨åå†è¯•ã€‚"})}catch(e){console.error("AIè¯·æ±‚å¤±è´¥",e),this.messages.push({role:"assistant",content:"ç½‘ç»œå‡ºé”™äº†ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•ã€‚"})}finally{this.loading=!1,this.scrollToBottom()}}},formatMessage(t){return t.replace(/\n/g,"<br>")},scrollToBottom(){this.$nextTick(()=>{const t=this.$refs.messagesContainer;t&&(t.scrollTop=t.scrollHeight)})}}},k={class:"ai-consult-page"},C={class:"chat-container"},T={class:"chat-messages",ref:"messagesContainer"},w={key:0,class:"suggestions"},x={class:"suggestion-tags"},B=["onClick"],V={class:"avatar"},A={class:"content"},S=["innerHTML"],N={key:1,class:"message ai-message"},H={class:"chat-input"},I=["disabled"],L=["disabled"];function D(t,e,F,K,n,l){return o(),i("div",k,[s("div",C,[e[7]||(e[7]=h('<div class="chat-header" data-v-67680b74><div class="ai-avatar" data-v-67680b74><i class="fas fa-robot" data-v-67680b74></i></div><div class="ai-info" data-v-67680b74><h2 data-v-67680b74>å® ç‰©å°åŠ©æ‰‹</h2><span class="status online" data-v-67680b74>åœ¨çº¿</span></div></div>',1)),s("div",T,[e[5]||(e[5]=s("div",{class:"message ai-message"},[s("div",{class:"avatar"},[s("i",{class:"fas fa-robot"})]),s("div",{class:"content"},[s("p",null,"ä½ å¥½ï¼æˆ‘æ˜¯å® ç‰©å°åŠ©æ‰‹ ğŸ¾"),s("p",null,"æˆ‘å¯ä»¥å¸®ä½ è§£ç­”å…³äºå® ç‰©é¥²å…»ã€å¥åº·ã€è®­ç»ƒç­‰æ–¹é¢çš„é—®é¢˜ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°ä½ çš„å—ï¼Ÿ")])],-1)),n.messages.length===0?(o(),i("div",w,[e[3]||(e[3]=s("p",{class:"suggestions-title"},"ä½ å¯ä»¥é—®æˆ‘ï¼š",-1)),s("div",x,[(o(!0),i(c,null,g(n.suggestions,(a,r)=>(o(),i("span",{key:r,class:"suggestion-tag",onClick:Q=>l.askQuestion(a)},b(a),9,B))),128))])])):d("",!0),(o(!0),i(c,null,g(n.messages,(a,r)=>(o(),i("div",{key:r,class:u(["message",a.role==="user"?"user-message":"ai-message"])},[s("div",V,[s("i",{class:u(a.role==="user"?"fas fa-user":"fas fa-robot")},null,2)]),s("div",A,[s("p",{innerHTML:l.formatMessage(a.content)},null,8,S)])],2))),128)),n.loading?(o(),i("div",N,[...e[4]||(e[4]=[s("div",{class:"avatar"},[s("i",{class:"fas fa-robot"})],-1),s("div",{class:"content typing"},[s("span"),s("span"),s("span")],-1)])])):d("",!0)],512),s("div",H,[m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.inputMessage=a),type:"text",placeholder:"è¾“å…¥ä½ çš„é—®é¢˜...",onKeyup:e[1]||(e[1]=f((...a)=>l.sendMessage&&l.sendMessage(...a),["enter"])),disabled:n.loading},null,40,I),[[v,n.inputMessage]]),s("button",{onClick:e[2]||(e[2]=(...a)=>l.sendMessage&&l.sendMessage(...a)),disabled:n.loading||!n.inputMessage.trim()},[...e[6]||(e[6]=[s("i",{class:"fas fa-paper-plane"},null,-1)])],8,L)])])])}const E=p(y,[["render",D],["__scopeId","data-v-67680b74"]]);export{E as default};
