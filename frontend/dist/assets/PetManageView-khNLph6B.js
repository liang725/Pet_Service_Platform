import{_ as k,u as C,o as T,d as p,e as s,f as i,l as c,g as P,t as d,q as l,n as w,F as D,s as $,m as x,p as _,x as u}from"./index-D7KbY98F.js";import{u as M}from"./pet-CCxjMNZm.js";const S={class:"pet-manage-view"},V={class:"page-header"},F={class:"page-title"},I={class:"page-subtitle"},A={class:"pet-count"},B=["disabled"],U={key:0,class:"loading-container"},z={class:"loading-spinner"},E={key:1,class:"error-container"},N={class:"error-icon"},Y={key:2,class:"empty-state"},q={class:"empty-icon"},L={key:3,class:"pets-container"},R={class:"add-pet-icon"},W={class:"pet-card-header"},j={class:"pet-basic-info"},G={class:"pet-name-row"},H={class:"pet-name"},J={class:"pet-meta"},K={class:"pet-gender"},O={class:"pet-age"},Q={class:"pet-details"},X={class:"pet-detail-item"},Z={class:"detail-content"},ss={class:"detail-value"},ts={class:"pet-detail-item"},es={class:"detail-content"},os={class:"detail-value"},ns={class:"pet-detail-item"},is={class:"detail-content"},ls={class:"detail-value"},as={class:"pet-detail-item"},ds={class:"detail-content"},cs={class:"detail-value"},rs={class:"pet-card-footer"},ps=["onClick"],_s=["onClick"],us={__name:"PetManageView",setup(ms){const m=x(),n=M();C();const y=a=>{if(!a)return"未知";const t=new Date(a),o=new Date;let e=o.getFullYear()-t.getFullYear(),r=o.getMonth()-t.getMonth();return r<0&&(e--,r+=12),e===0?r+"个月":r===0?e+"岁":e+"岁"+r+"个月"},h=a=>a?`${a}kg`:"未记录",f=async(a,t)=>{if(confirm(`确定要删除宠物 "${t}" 吗？此操作不可撤销。`))try{await n.deletePet(a),alert(`宠物"${t}"已成功删除`)}catch(o){alert(o.message||"删除失败，请重试")}},g=()=>{m.push("/pets/add")},b=a=>{m.push(`/pets/${a}/edit`)},v=()=>{n.fetchUserPets()};return T(()=>{n.fetchUserPets()}),(a,t)=>{const o=P("Icon");return _(),p("div",S,[s("div",V,[s("h1",F,[i(o,{icon:"mdi:paw",class:"title-icon"}),t[0]||(t[0]=c(" 我的宠物档案 ",-1))]),s("p",I,[t[1]||(t[1]=c(" 管理您的宠物信息，记录它们的成长点滴 ",-1)),s("span",A,d(l(n).pets.length)+" 只宠物",1),s("button",{onClick:v,class:"refresh-btn",disabled:l(n).loading},[i(o,{icon:"mdi:refresh",class:w({spin:l(n).loading})},null,8,["class"])],8,B)])]),l(n).loading?(_(),p("div",U,[s("div",z,[i(o,{icon:"mdi:loading",spin:""})]),t[2]||(t[2]=s("p",null,"加载中...",-1))])):l(n).error?(_(),p("div",E,[s("div",N,[i(o,{icon:"mdi:alert-circle"})]),t[4]||(t[4]=s("h3",null,"加载失败",-1)),s("p",null,d(l(n).error),1),s("button",{onClick:v,class:"retry-btn"},[i(o,{icon:"mdi:refresh"}),t[3]||(t[3]=c(" 重新加载 ",-1))])])):l(n).hasPets?(_(),p("div",L,[s("div",{class:"pet-card add-pet-card",onClick:g},[s("div",R,[i(o,{icon:"mdi:plus-circle"})]),t[8]||(t[8]=s("h3",null,"添加新宠物",-1)),t[9]||(t[9]=s("p",null,"记录新的宠物伙伴",-1))]),(_(!0),p(D,null,$(l(n).pets,e=>(_(),p("div",{key:e.id,class:"pet-card",style:u({"border-top-color":l(n).getPetTypeColor(e.petType)})},[s("div",W,[s("div",{class:"pet-avatar",style:u({backgroundColor:l(n).getPetTypeColor(e.petType)+"20"})},[i(o,{icon:l(n).getPetTypeIcon(e.petType),style:u({color:l(n).getPetTypeColor(e.petType)})},null,8,["icon","style"])],4),s("div",j,[s("div",G,[s("h3",H,d(e.name),1),s("span",{class:"pet-type",style:u({backgroundColor:l(n).getPetTypeColor(e.petType)+"20",color:l(n).getPetTypeColor(e.petType)})},d(e.petType),5)]),s("div",J,[s("span",K,[i(o,{icon:"mdi:gender-male-female"}),c(" "+d(e.gender||"未知"),1)]),s("span",O,[i(o,{icon:"mdi:cake"}),c(" "+d(y(e.birthDate)),1)])])])]),s("div",Q,[s("div",X,[i(o,{icon:"mdi:dna",class:"detail-icon"}),s("div",Z,[t[10]||(t[10]=s("span",{class:"detail-label"},"品种",-1)),s("span",ss,d(e.breed||"未记录"),1)])]),s("div",ts,[i(o,{icon:"mdi:weight",class:"detail-icon"}),s("div",es,[t[11]||(t[11]=s("span",{class:"detail-label"},"体重",-1)),s("span",os,d(h(e.weight)),1)])]),s("div",ns,[i(o,{icon:"mdi:palette",class:"detail-icon"}),s("div",is,[t[12]||(t[12]=s("span",{class:"detail-label"},"毛色",-1)),s("span",ls,d(e.color||"未记录"),1)])]),s("div",as,[i(o,{icon:"mdi:heart",class:"detail-icon"}),s("div",ds,[t[13]||(t[13]=s("span",{class:"detail-label"},"性格",-1)),s("span",cs,d(e.personality||"未记录"),1)])])]),s("div",rs,[s("button",{onClick:r=>b(e.id),class:"action-btn edit-btn"},[i(o,{icon:"mdi:pencil"}),t[14]||(t[14]=c(" 编辑 ",-1))],8,ps),s("button",{onClick:r=>f(e.id,e.name),class:"action-btn delete-btn"},[i(o,{icon:"mdi:trash-can"}),t[15]||(t[15]=c(" 删除 ",-1))],8,_s)])],4))),128))])):(_(),p("div",Y,[s("div",q,[i(o,{icon:"mdi:cat"})]),t[6]||(t[6]=s("h3",null,"还没有宠物档案哦",-1)),t[7]||(t[7]=s("p",null,"快添加你的第一个宠物伙伴吧！记录下TA的点点滴滴，让爱永不褪色。",-1)),s("button",{onClick:g,class:"add-first-pet-btn"},[i(o,{icon:"mdi:plus-circle"}),t[5]||(t[5]=c(" 添加第一只宠物 ",-1))])]))])}}},ys=k(us,[["__scopeId","data-v-cd1f5ffa"]]);export{ys as default};
