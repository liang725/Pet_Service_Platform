const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/address-BWcCuitd.js","assets/index-D7KbY98F.js","assets/index-CNnu_hxC.css"])))=>i.map(i=>d[i]);
import{_ as z,r as U,o as Y,C as W,c as X,d as a,e,h as v,n as w,l as h,t as c,f as l,q as k,K as D,F as N,s as A,p as r,k as _,g as L,i as y,J as T,v as P,w as F,D as E,G as Z,L as $,M as x,y as O,A as V,H as tt,u as et}from"./index-D7KbY98F.js";import{u as st,a as it,s as ot,d as nt,g as rt,c as at,b as lt,e as dt,f as ct}from"./address-BWcCuitd.js";const ut={class:"my-orders-section"},mt={class:"order-filter-tabs"},pt={key:0,class:"filter-badge"},ht={key:0,class:"filter-badge"},gt={key:0,class:"loading-state"},ft={class:"loading-spinner"},vt={key:1,class:"empty-state"},yt={class:"empty-icon"},wt={key:2,class:"orders-list"},bt={class:"order-header"},Ct={class:"order-info"},Pt={class:"order-info-item"},kt={class:"order-info-value"},Dt={class:"order-info-item"},Ft={class:"order-info-value"},Nt={class:"order-info-item"},At={class:"order-info-value"},St={class:"order-status-section"},Tt={key:1,class:"payment-expired-badge"},It={key:0,class:"order-preview"},Et=["onClick"],_t={class:"product-image"},xt=["src","alt"],Ot={class:"product-info"},qt={class:"order-summary"},Mt={class:"order-actions"},Ut=["onClick"],Lt=["onClick"],Vt=["onClick"],Rt=["onClick"],zt=["onClick"],Kt={key:4,class:"expired-order-notice"},Qt={key:1,class:"order-detail-expanded"},Gt={class:"detail-section"},Bt={class:"detail-products"},Ht=["onClick"],jt={class:"product-image"},Jt=["src","alt"],Yt={class:"product-details"},Wt={class:"price-quantity"},Xt={class:"price"},Zt={class:"quantity"},$t={key:0,class:"detail-section"},te={class:"order-summary-detail"},ee={class:"summary-row"},se={class:"summary-row"},ie={key:0,class:"summary-row"},oe={key:1,class:"summary-row"},ne={class:"summary-row total"},R=600,re={__name:"MyOrders",props:{orders:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["continue-shopping","go-to-product","reorder","pay-order","cancel-order","clear-trash","delete-order"],setup(s,{emit:t}){const u=s,f=t,n=U("all"),o=U(Date.now());let d=null;Y(()=>{d=setInterval(()=>{o.value=Date.now()},1e3)}),W(()=>{d&&clearInterval(d)});const I=X(()=>n.value==="all"?u.orders:n.value==="pending"?u.orders.filter(g=>g.status!=="pending"?!1:!S(g)):n.value==="processing"?u.orders.filter(g=>g.status==="paid"||g.status==="shipped"):n.value==="delivered"?u.orders.filter(g=>g.status==="delivered"):n.value==="cancelled"?u.orders.filter(g=>g.status==="cancelled"||g.status==="pending"&&S(g)):u.orders),i=g=>{n.value=g},b=()=>u.orders.filter(g=>g.status==="pending"&&!S(g)).length,q=()=>u.orders.filter(g=>g.status==="delivered").length,K=()=>u.orders.length,Q=()=>{f("clear-trash")},S=g=>{if(g.status!=="pending")return!1;const m=new Date(g.createdAt||g.date);return Math.floor((new Date-m)/1e3)>R},M=g=>{const m=new Date(g.createdAt||g.date),p=Math.floor((o.value-m.getTime())/1e3),C=R-p;return C>0?C:0},G=g=>{if(g<=0)return"已超时";const m=Math.floor(g/60),p=g%60;return`${m}:${p.toString().padStart(2,"0")}`},B=g=>{g.showDetail=!g.showDetail},H=g=>({pending:"status-pending",paid:"status-paid",shipped:"status-shipped",delivered:"status-delivered",cancelled:"status-cancelled"})[g]||"",j=g=>({pending:"待付款",paid:"待发货",shipped:"待收货",delivered:"待评价",cancelled:"已取消"})[g]||g,J=g=>g?new Date(g).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return(g,m)=>(r(),a("div",ut,[m[29]||(m[29]=e("div",{class:"content-header"},[e("h2",null,"我的订单"),e("p",null,"查看和管理您的所有订单")],-1)),e("div",mt,[e("div",{class:w(["filter-tab",{active:n.value==="all"}]),onClick:m[0]||(m[0]=p=>i("all"))}," 全部订单 ",2),e("div",{class:w(["filter-tab",{active:n.value==="pending"}]),onClick:m[1]||(m[1]=p=>i("pending"))},[m[6]||(m[6]=h(" 待付款 ",-1)),b()>0?(r(),a("span",pt,c(b()),1)):v("",!0)],2),e("div",{class:w(["filter-tab",{active:n.value==="processing"}]),onClick:m[2]||(m[2]=p=>i("processing"))}," 待收货/使用 ",2),e("div",{class:w(["filter-tab",{active:n.value==="delivered"}]),onClick:m[3]||(m[3]=p=>i("delivered"))},[m[7]||(m[7]=h(" 待评价 ",-1)),q()>0?(r(),a("span",ht,c(q()),1)):v("",!0)],2),e("div",{class:w(["filter-tab",{active:n.value==="cancelled"}]),onClick:m[4]||(m[4]=p=>i("cancelled"))}," 订单回收站 ",2),K()>0?(r(),a("div",{key:0,class:"clear-all-btn",onClick:Q},[l(k(D),{icon:"mdi:delete-sweep"}),m[8]||(m[8]=h(" 清空所有订单 ",-1))])):v("",!0)]),s.loading?(r(),a("div",gt,[e("div",ft,[l(k(D),{icon:"mdi:loading",class:"spin"}),m[9]||(m[9]=e("span",null,"加载中...",-1))])])):s.orders.length===0?(r(),a("div",vt,[e("div",yt,[l(k(D),{icon:"mdi:clipboard-list"})]),m[11]||(m[11]=e("div",{class:"empty-title"},"暂无订单",-1)),m[12]||(m[12]=e("div",{class:"empty-description"},"您还没有任何订单记录",-1)),e("button",{class:"empty-action",onClick:m[5]||(m[5]=p=>g.$emit("continue-shopping"))},[l(k(D),{icon:"mdi:shopping"}),m[10]||(m[10]=h(" 去购物 ",-1))])])):(r(),a("div",wt,[(r(!0),a(N,null,A(I.value,p=>(r(),a("div",{key:p.id,class:"order-card"},[e("div",bt,[e("div",Ct,[e("div",Pt,[m[13]||(m[13]=e("div",{class:"order-info-label"},"订单号",-1)),e("div",kt,c(p.orderNo||p.id),1)]),e("div",Dt,[m[14]||(m[14]=e("div",{class:"order-info-label"},"下单时间",-1)),e("div",Ft,c(J(p.createdAt||p.date)),1)]),e("div",Nt,[m[15]||(m[15]=e("div",{class:"order-info-label"},"订单金额",-1)),e("div",At,"¥"+c((p.finalAmount||p.total||0).toFixed(2)),1)])]),e("div",St,[e("div",{class:w(["order-status",H(p.status)])},c(j(p.status)),3),p.status==="pending"&&!S(p)?(r(),a("div",{key:0,class:w(["payment-countdown-badge",{"countdown-warning":M(p)<=180}])},[l(k(D),{icon:"mdi:clock-outline"}),e("span",null,c(G(M(p))),1)],2)):p.status==="pending"&&S(p)?(r(),a("div",Tt,[l(k(D),{icon:"mdi:clock-alert"}),m[16]||(m[16]=e("span",null,"已超时",-1))])):v("",!0)])]),p.items&&p.items.length>0?(r(),a("div",It,[e("div",{class:"preview-product",onClick:C=>g.$emit("go-to-product",p.items[0].productId)},[e("div",_t,[p.items[0].image?(r(),a("img",{key:0,src:p.items[0].image,alt:p.items[0].name},null,8,xt)):(r(),_(k(D),{key:1,icon:"mdi:image"}))]),e("div",Ot,[e("h4",null,c(p.items[0].name),1),e("p",null,c(p.items[0].spec),1)])],8,Et),e("div",qt,[e("p",null,"共 "+c(p.items.length)+" 件商品",1),e("h3",null,"实付：¥"+c((p.finalAmount||p.total||0).toFixed(2)),1)])])):v("",!0),e("div",Mt,[e("button",{class:"action-btn action-btn-secondary",onClick:C=>B(p)},[l(k(D),{icon:"mdi:eye"}),h(" "+c(p.showDetail?"收起详情":"查看详情"),1)],8,Ut),p.status!=="pending"&&p.items&&p.items.length>0?(r(),a("button",{key:0,class:"action-btn action-btn-primary",onClick:C=>g.$emit("reorder",p)},[l(k(D),{icon:"mdi:refresh"}),m[17]||(m[17]=h(" 再次购买 ",-1))],8,Lt)):v("",!0),p.status==="pending"&&!S(p)?(r(),a("button",{key:1,class:"action-btn action-btn-primary",onClick:C=>g.$emit("pay-order",p)},[l(k(D),{icon:"mdi:credit-card"}),m[18]||(m[18]=h(" 立即支付 ",-1))],8,Vt)):v("",!0),p.status==="pending"&&!S(p)?(r(),a("button",{key:2,class:"action-btn action-btn-danger",onClick:C=>g.$emit("cancel-order",p)},[l(k(D),{icon:"mdi:close"}),m[19]||(m[19]=h(" 取消订单 ",-1))],8,Rt)):v("",!0),p.status==="cancelled"?(r(),a("button",{key:3,class:"action-btn action-btn-delete",onClick:C=>g.$emit("delete-order",p)},[l(k(D),{icon:"mdi:delete"}),m[20]||(m[20]=h(" 删除订单 ",-1))],8,zt)):v("",!0),p.status==="pending"&&S(p)?(r(),a("div",Kt,[l(k(D),{icon:"mdi:clock-alert"}),m[21]||(m[21]=e("span",null,"订单已超时，无法支付",-1))])):v("",!0)]),p.showDetail?(r(),a("div",Qt,[e("div",Gt,[m[22]||(m[22]=e("h4",null,"商品清单",-1)),e("div",Bt,[(r(!0),a(N,null,A(p.items,C=>(r(),a("div",{key:C.id,class:"detail-product-item",onClick:en=>g.$emit("go-to-product",C.productId)},[e("div",jt,[C.image?(r(),a("img",{key:0,src:C.image,alt:C.name},null,8,Jt)):(r(),_(k(D),{key:1,icon:"mdi:image"}))]),e("div",Yt,[e("h5",null,c(C.name),1),e("p",null,c(C.spec),1),e("div",Wt,[e("span",Xt,"¥"+c(C.price.toFixed(2)),1),e("span",Zt,"数量："+c(C.quantity),1)])])],8,Ht))),128))])]),p.summary?(r(),a("div",$t,[m[28]||(m[28]=e("h4",null,"费用明细",-1)),e("div",te,[e("div",ee,[m[23]||(m[23]=e("span",null,"商品总价",-1)),e("span",null,"¥"+c(p.summary.subtotal.toFixed(2)),1)]),e("div",se,[m[24]||(m[24]=e("span",null,"运费",-1)),e("span",null,"¥"+c(p.summary.shipping.toFixed(2)),1)]),p.summary.coupon>0?(r(),a("div",ie,[m[25]||(m[25]=e("span",null,"优惠券折扣",-1)),e("span",null,"-¥"+c(p.summary.coupon.toFixed(2)),1)])):v("",!0),p.summary.discount>0?(r(),a("div",oe,[m[26]||(m[26]=e("span",null,"会员折扣",-1)),e("span",null,"-¥"+c(p.summary.discount.toFixed(2)),1)])):v("",!0),e("div",ne,[m[27]||(m[27]=e("span",null,"实付金额",-1)),e("span",null,"¥"+c(p.summary.total.toFixed(2)),1)])])])):v("",!0)])):v("",!0)]))),128))]))]))}},ae=z(re,[["__scopeId","data-v-f6f67b44"]]),le={name:"UserCenterView",components:{MyOrders:ae},setup(){const s=tt(),t=et();return{cartStore:s,userStore:t}},data(){return{activeTab:"orders",orderFilter:"all",appointmentFilter:"all",userInfo:{name:"",level:"",phone:"",email:"",points:0},orders:[],loading:!1,promoCode:"",promoDiscount:0,promoMessage:"",promoMessageType:"info",showPaymentDialog:!1,paymentStatus:"waiting",selectedPaymentMethod:"wechat",paymentTimeLeft:600,paymentTimer:null,currentPaymentOrder:null,globalTimer:null,cartSearchKeyword:"",cartCurrentPage:1,cartPageSize:5,favorites:[],favoritesSearchKeyword:"",favoritesCurrentPage:1,favoritesPageSize:8,appointments:[],showAppointmentDialog:!1,selectedAppointment:null,appointmentForm:{petId:"",serviceId:"",appointmentDate:"",timeSlot:"",specialNotes:""},pets:[],services:[],timeSlots:["09:00","10:30","14:00","15:30","17:00"],availableTimeSlots:[],addresses:[],showAddressDialog:!1,showDeleteDialog:!1,editingAddress:null,deletingAddress:null,addressForm:{recipientName:"",phone:"",province:"",city:"",district:"",detailAddress:"",isDefault:!1},cityData:{北京市:["北京市"],上海市:["上海市"],天津市:["天津市"],重庆市:["重庆市"],广东省:["广州市","深圳市","珠海市","佛山市","东莞市","中山市","惠州市"],浙江省:["杭州市","宁波市","温州市","嘉兴市","湖州市","绍兴市","金华市"],江苏省:["南京市","苏州市","无锡市","常州市","南通市","徐州市","扬州市"],山东省:["济南市","青岛市","烟台市","潍坊市","临沂市","淄博市","济宁市"],河南省:["郑州市","洛阳市","开封市","南阳市","安阳市","新乡市","平顶山市"],湖北省:["武汉市","宜昌市","襄阳市","荆州市","黄石市","十堰市","孝感市"],湖南省:["长沙市","株洲市","湘潭市","衡阳市","邵阳市","岳阳市","常德市"],四川省:["成都市","绵阳市","德阳市","南充市","宜宾市","自贡市","乐山市"],福建省:["福州市","厦门市","泉州市","漳州市","莆田市","三明市","龙岩市"],安徽省:["合肥市","芜湖市","蚌埠市","淮南市","马鞍山市","淮北市","铜陵市"],江西省:["南昌市","九江市","景德镇市","萍乡市","新余市","鹰潭市","赣州市"],河北省:["石家庄市","唐山市","秦皇岛市","邯郸市","邢台市","保定市","张家口市"],山西省:["太原市","大同市","阳泉市","长治市","晋城市","朔州市","晋中市"],辽宁省:["沈阳市","大连市","鞍山市","抚顺市","本溪市","丹东市","锦州市"],吉林省:["长春市","吉林市","四平市","辽源市","通化市","白山市","松原市"],黑龙江省:["哈尔滨市","齐齐哈尔市","鸡西市","鹤岗市","双鸭山市","大庆市","伊春市"],陕西省:["西安市","铜川市","宝鸡市","咸阳市","渭南市","延安市","汉中市"],甘肃省:["兰州市","嘉峪关市","金昌市","白银市","天水市","武威市","张掖市"],青海省:["西宁市","海东市"],宁夏回族自治区:["银川市","石嘴山市","吴忠市","固原市","中卫市"],新疆维吾尔自治区:["乌鲁木齐市","克拉玛依市","吐鲁番市","哈密市"],西藏自治区:["拉萨市","日喀则市","昌都市","林芝市"],内蒙古自治区:["呼和浩特市","包头市","乌海市","赤峰市","通辽市","鄂尔多斯市"],广西壮族自治区:["南宁市","柳州市","桂林市","梧州市","北海市","防城港市","钦州市"],云南省:["昆明市","曲靖市","玉溪市","保山市","昭通市","丽江市","普洱市"],贵州省:["贵阳市","六盘水市","遵义市","安顺市","毕节市","铜仁市"],海南省:["海口市","三亚市","三沙市","儋州市"]},districtData:{北京市:["东城区","西城区","朝阳区","海淀区","丰台区","石景山区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","密云区","延庆区"],上海市:["黄浦区","徐汇区","长宁区","静安区","普陀区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区","崇明区"],天津市:["和平区","河东区","河西区","南开区","河北区","红桥区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","滨海新区","宁河区","静海区","蓟州区"],重庆市:["万州区","涪陵区","渝中区","大渡口区","江北区","沙坪坝区","九龙坡区","南岸区","北碚区","綦江区","大足区","渝北区","巴南区","黔江区","长寿区","江津区"],广州市:["天河区","越秀区","荔湾区","海珠区","白云区","黄埔区","番禺区","花都区","南沙区","从化区","增城区"],深圳市:["福田区","罗湖区","南山区","宝安区","龙岗区","盐田区","龙华区","坪山区","光明区","大鹏新区"],杭州市:["西湖区","拱墅区","江干区","钱塘区","上城区","下城区","滨江区","余杭区","萧山区","富阳区","临安区","桐庐县","淳安县","建德市"],宁波市:["海曙区","江北区","鄞州区","镇海区","北仑区","奉化区","象山县","宁海县","余姚市","慈溪市"],南京市:["玄武区","秦淮区","建邺区","鼓楼区","浦口区","栖霞区","雨花台区","江宁区","六合区","溧水区","高淳区"],苏州市:["虎丘区","吴中区","相城区","姑苏区","吴江区","常熟市","张家港市","昆山市","太仓市"],济南市:["历下区","市中区","槐荫区","天桥区","历城区","长清区","章丘区","济阳区","莱芜区","钢城区","平阴县","商河县"],青岛市:["市南区","市北区","黄岛区","崂山区","李沧区","城阳区","即墨区","胶州市","平度市","莱西市"],郑州市:["中原区","二七区","管城区","金水区","上街区","惠济区","中牟县","巩义市","荥阳市","新密市","新郑市","登封市"],武汉市:["江岸区","江汉区","硚口区","汉阳区","武昌区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区"],长沙市:["芙蓉区","天心区","岳麓区","开福区","雨花区","望城区","长沙县","浏阳市","宁乡市"],成都市:["锦江区","青羊区","金牛区","武侯区","成华区","龙泉驿区","青白江区","新都区","温江区","双流区","郫都区","新津区","金堂县","大邑县","蒲江县","都江堰市","彭州市","邛崃市","崇州市","简阳市"],福州市:["鼓楼区","台江区","仓山区","马尾区","晋安区","长乐区","闽侯县","连江县","罗源县","闽清县","永泰县","平潭县","福清市"],厦门市:["思明区","海沧区","湖里区","集美区","同安区","翔安区"],合肥市:["瑶海区","庐阳区","蜀山区","包河区","长丰县","肥东县","肥西县","庐江县","巢湖市"],南昌市:["东湖区","西湖区","青云谱区","湾里区","青山湖区","新建区","南昌县","安义县","进贤县"],石家庄市:["长安区","桥西区","新华区","井陉矿区","裕华区","藁城区","鹿泉区","栾城区","井陉县","正定县","行唐县","灵寿县","高邑县","深泽县","赞皇县","无极县","平山县","元氏县","赵县","辛集市","晋州市","新乐市"],太原市:["小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","清徐县","阳曲县","娄烦县","古交市"],沈阳市:["和平区","沈河区","大东区","皇姑区","铁西区","苏家屯区","浑南区","沈北新区","于洪区","辽中区","康平县","法库县","新民市"],大连市:["中山区","西岗区","沙河口区","甘井子区","旅顺口区","金州区","普兰店区","长海县","瓦房店市","庄河市"],长春市:["南关区","宽城区","朝阳区","二道区","绿园区","双阳区","九台区","农安县","榆树市","德惠市"],哈尔滨市:["道里区","南岗区","道外区","平房区","松北区","香坊区","呼兰区","阿城区","双城区","依兰县","方正县","宾县","巴彦县","木兰县","通河县","延寿县","尚志市","五常市"],西安市:["新城区","碑林区","莲湖区","灞桥区","未央区","雁塔区","阎良区","临潼区","长安区","高陵区","鄠邑区","蓝田县","周至县"],兰州市:["城关区","七里河区","西固区","安宁区","红古区","永登县","皋兰县","榆中县"],西宁市:["城东区","城中区","城西区","城北区","大通县","湟中区","湟源县"],银川市:["兴庆区","西夏区","金凤区","永宁县","贺兰县","灵武市"],乌鲁木齐市:["天山区","沙依巴克区","新市区","水磨沟区","头屯河区","达坂城区","米东区","乌鲁木齐县"],拉萨市:["城关区","堆龙德庆区","达孜区","林周县","当雄县","尼木县","曲水县","墨竹工卡县"],呼和浩特市:["新城区","回民区","玉泉区","赛罕区","土默特左旗","托克托县","和林格尔县","清水河县","武川县"],南宁市:["兴宁区","青秀区","江南区","西乡塘区","良庆区","邕宁区","武鸣区","隆安县","马山县","上林县","宾阳县","横县"],昆明市:["五华区","盘龙区","官渡区","西山区","东川区","呈贡区","晋宁区","富民县","宜良县","石林县","嵩明县","禄劝县","寻甸县","安宁市"],贵阳市:["南明区","云岩区","花溪区","乌当区","白云区","观山湖区","开阳县","息烽县","修文县","清镇市"],海口市:["秀英区","龙华区","琼山区","美兰区"],三亚市:["海棠区","吉阳区","天涯区","崖州区"]},showProfileEditDialog:!1,showPasswordDialog:!1,showPhoneDialog:!1,showEmailDialog:!1,showDeleteAccountDialog:!1,profileEditForm:{name:"",nickname:"",gender:"",birthday:"",bio:""},passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},phoneForm:{phone:"",verificationCode:""},emailForm:{email:"",verificationCode:""},notificationSettings:{orderNotification:!0,promotionNotification:!0,appointmentReminder:!0,emailNotification:!1},privacySettings:{profileVisibility:"public",showPurchaseHistory:!0,allowDataAnalysis:!0},otherSettings:{language:"zh-CN",theme:"light",autoLogin:!0}}},computed:{filteredOrders(){return this.orderFilter==="all"?this.orders:this.orders.filter(s=>s.status===this.orderFilter)},filteredAppointments(){return this.appointmentFilter==="all"?this.appointments:this.appointments.filter(s=>s.status===this.appointmentFilter)},orderCount(){return this.orders.filter(s=>s.status==="pending"||s.status==="processing").length},completedOrderCount(){return this.orders.filter(s=>s.status==="delivered"||s.status==="completed"||s.status==="paid"||s.status==="shipped").length},cartCount(){return this.cartStore.totalItems},selectedCount(){return this.filteredCartItems.filter(s=>s.selected).length},cartSubtotal(){return this.filteredCartItems.filter(s=>s.selected).reduce((s,t)=>s+t.price*t.quantity,0)},cartTotal(){return this.cartSubtotal-this.promoDiscount},cartItems(){return this.cartStore.cartItems.map(s=>({...s,selected:s.selected!==void 0?s.selected:!0}))},filteredCartItems(){return this.cartSearchKeyword.trim()?this.cartItems.filter(s=>s.name.toLowerCase().includes(this.cartSearchKeyword.toLowerCase())||s.spec&&s.spec.toLowerCase().includes(this.cartSearchKeyword.toLowerCase())):this.cartItems},cartTotalPages(){return Math.ceil(this.filteredCartItems.length/this.cartPageSize)},getPageNumbers(){const s=this.cartTotalPages,t=this.cartCurrentPage,u=[];if(s<=7)for(let f=1;f<=s;f++)u.push(f);else if(t<=4){for(let f=1;f<=5;f++)u.push(f);u.push("..."),u.push(s)}else if(t>=s-3){u.push(1),u.push("...");for(let f=s-4;f<=s;f++)u.push(f)}else{u.push(1),u.push("...");for(let f=t-1;f<=t+1;f++)u.push(f);u.push("..."),u.push(s)}return u},paginatedCartItems(){const s=(this.cartCurrentPage-1)*this.cartPageSize,t=s+this.cartPageSize;return this.filteredCartItems.slice(s,t)},selectAll(){return this.filteredCartItems.length>0&&this.filteredCartItems.every(s=>s.selected)},availableCities(){return this.addressForm.province?this.cityData[this.addressForm.province]||[]:[]},availableDistricts(){return this.addressForm.city?this.districtData[this.addressForm.city]||[]:[]},filteredFavorites(){return this.favoritesSearchKeyword.trim()?this.favorites.filter(s=>s.name.toLowerCase().includes(this.favoritesSearchKeyword.toLowerCase())||s.description&&s.description.toLowerCase().includes(this.favoritesSearchKeyword.toLowerCase())):this.favorites},favoritesTotalPages(){return Math.ceil(this.filteredFavorites.length/this.favoritesPageSize)},paginatedFavorites(){const s=(this.favoritesCurrentPage-1)*this.favoritesPageSize,t=s+this.favoritesPageSize;return this.filteredFavorites.slice(s,t)}},methods:{goToNewAppointment(){this.$router.push("/service/appointment")},setOrderFilter(s){this.orderFilter=s},getPendingCount(){return this.orders.filter(s=>s.status==="pending").length},getDeliveredCount(){return this.orders.filter(s=>s.status==="delivered").length},getCancelledCount(){return this.orders.filter(s=>s.status==="cancelled").length},async clearTrash(){const s=this.orders;if(s.length===0){this.showNotification("没有订单可删除");return}if(confirm(`确定要删除全部订单吗？这将永久删除 ${s.length} 个订单，此操作不可恢复。`))try{const u=await ct();u.success?(this.orders=[],this.showNotification(`成功删除 ${u.data.deletedCount} 个订单`)):this.showNotification("删除订单失败："+u.message)}catch(u){console.error("删除订单失败:",u),this.showNotification("删除订单失败，请重试")}},async deleteOrder(s){if(confirm(`确定要删除订单 ${s.orderNo||s.id} 吗？此操作不可恢复。`))try{const u=await dt(s.id);u.success?(this.orders=this.orders.filter(f=>f.id!==s.id),this.showNotification("订单删除成功")):this.showNotification("删除订单失败："+u.message)}catch(u){console.error("删除订单失败:",u),this.showNotification("删除订单失败，请重试")}},setAppointmentFilter(s){this.appointmentFilter=s},getPendingAppointmentCount(){return this.appointments.filter(s=>s.status==="pending").length},async loadOrders(){try{this.loading=!0;const s=await lt();s.success?(this.orders=s.data.map(t=>({...t,id:t.orderNo,date:t.createdAt,total:t.finalAmount,items:(t.items||[]).map(u=>({...u,productId:u.productId,spec:u.spec||u.specification||"标准装",quantity:u.quantity||1,price:u.price||u.unitPrice||0,name:u.name||u.productName||"未知商品"}))})),console.log("订单数据加载完成:",this.orders)):this.showNotification("获取订单列表失败："+s.message)}catch(s){console.error("获取订单列表失败:",s),this.showNotification("获取订单列表失败")}finally{this.loading=!1}},async loadCartItems(){try{this.loading=!0,await this.cartStore.loadCart(),console.log("购物车数据从store加载:",this.cartStore.cartItems)}catch(s){console.error("获取购物车失败:",s),this.showNotification("获取购物车失败")}finally{this.loading=!1}},switchTab(s){this.activeTab=s,s==="orders"?this.loadOrders():s==="cart"?this.loadCartItems():s==="favorites"?this.loadFavorites():s==="address"?this.loadAddresses():s==="appointments"&&this.loadAppointments()},formatDate(s){if(!s)return"";const t=new Date(s);return isNaN(t.getTime())?s:t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})},formatDateTime(s){if(!s)return"";const t=new Date(s);return isNaN(t.getTime())?s:t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getStatusClass(s){return{pending:"status-pending",paid:"status-paid",processing:"status-processing",shipped:"status-shipped",delivered:"status-delivered",cancelled:"status-cancelled"}[s]||""},getStatusText(s){return{pending:"待支付",paid:"已支付",processing:"处理中",shipped:"已发货",delivered:"已送达",cancelled:"已取消"}[s]||s},async reorder(s){if(console.log("reorder 被调用，订单数据:",s),!this.userStore.isLoggedIn){this.showNotification("请先登录"),this.$router.push("/auth");return}if(!s.items||s.items.length===0){this.showNotification("订单商品信息不完整，无法重新购买");return}try{let t=0,u=0;const f=[];for(const n of s.items)try{let o=n.productId;if(!o){console.error("商品缺少productId字段:",n);const I=n.name||n.productName||"未知商品";f.push(`${I} (缺少商品ID)`),u++;continue}if(typeof o=="string"&&(o=parseInt(o)),!o||isNaN(o)||o<=0){console.error("商品ID无效:",n),f.push(`${n.name||"未知商品"} (ID无效)`),u++;continue}if(!n.name&&!n.productName){console.error("商品名称缺失:",n),f.push(`商品ID ${o} (名称缺失)`),u++;continue}const d={productId:o,spec:n.spec||n.specification||"标准装",quantity:Math.max(1,parseInt(n.quantity)||1)};console.log("准备添加商品到购物车:",d),await this.cartStore.addItem(d),t++,console.log(`成功添加商品: ${n.name||n.productName}`)}catch(o){console.error("添加单个商品失败:",o,n);const d=n.name||n.productName||`商品ID ${n.productId}`;f.push(`${d} (${o.message||"添加失败"})`),u++}if(t>0){let n=`成功添加 ${t} 件商品到购物车`;u>0&&(n+=`，${u} 件商品添加失败`,console.log("失败的商品:",f)),this.showNotification(n),await this.cartStore.loadCart(),t===s.items.length&&setTimeout(()=>{confirm("商品已全部添加到购物车，是否立即查看购物车？")&&this.switchTab("cart")},1e3)}else{let n="所有商品添加失败";f.length>0&&(n+=`，失败原因：
`+f.slice(0,3).join(`
`),f.length>3&&(n+=`
等${f.length}个问题`)),this.showNotification(n)}}catch(t){console.error("重新购买失败:",t),this.showNotification("重新购买失败："+(t.message||"网络错误，请稍后重试"))}},payOrder(s){this.currentPaymentOrder=s,this.showPaymentDialog=!0,this.paymentStatus="waiting",this.selectedPaymentMethod="wechat";const t=this.getPaymentTimeLeft(s);this.paymentTimeLeft=Math.max(0,t),this.paymentTimeLeft>0?this.startPaymentTimer():this.autoExpireOrder(s)},isOrderExpired(s){if(!s||s.status!=="pending")return!1;const t=new Date(s.createdAt||s.date);return Math.floor((new Date-t)/1e3)>600},getPaymentTimeLeft(s){if(!s||s.status!=="pending")return 0;const t=new Date(s.createdAt||s.date),f=Math.floor((new Date-t)/1e3);return Math.max(0,600-f)},formatPaymentTime(s){if(s<=0)return"已超时";const t=Math.floor(s/60),u=s%60;return`${t.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},startPaymentTimer(){this.stopPaymentTimer(),this.paymentTimer=setInterval(()=>{this.paymentTimeLeft--,this.paymentTimeLeft<=0&&(this.stopPaymentTimer(),this.showPaymentDialog&&this.autoExpirePayment())},1e3)},stopPaymentTimer(){this.paymentTimer&&(clearInterval(this.paymentTimer),this.paymentTimer=null)},startGlobalTimer(){this.stopGlobalTimer(),this.globalTimer=setInterval(()=>{this.$forceUpdate()},1e3)},stopGlobalTimer(){this.globalTimer&&(clearInterval(this.globalTimer),this.globalTimer=null)},autoExpirePayment(){this.showNotification("支付超时，订单已自动取消"),this.closePaymentDialog(),this.loadOrders()},autoExpireOrder(s){this.showNotification(`订单 ${s.orderNo||s.id} 已超时`),this.loadOrders()},getPaymentMethodName(s){return{wechat:"微信",alipay:"支付宝",unionpay:"银联"}[s]||"微信"},async confirmPayment(){if(this.currentPaymentOrder)try{const{payOrder:s}=await V(async()=>{const{payOrder:u}=await import("./address-BWcCuitd.js").then(f=>f.o);return{payOrder:u}},__vite__mapDeps([0,1,2])),t=await s(this.currentPaymentOrder.orderNo||this.currentPaymentOrder.id,this.selectedPaymentMethod);t.success?(this.paymentStatus="success",this.stopPaymentTimer(),this.showNotification("支付成功！"),setTimeout(()=>{this.closePaymentDialog(),this.loadOrders()},2e3)):this.showNotification("支付失败："+t.message)}catch(s){console.error("支付失败:",s),this.showNotification("支付失败，请重试")}},async cancelPayment(){if(this.stopPaymentTimer(),this.paymentTimeLeft>0)if(confirm(`是否要取消订单？
选择"确定"将取消订单
选择"取消"将保留订单，稍后可继续支付`)&&this.currentPaymentOrder)try{const{cancelOrder:t}=await V(async()=>{const{cancelOrder:f}=await import("./address-BWcCuitd.js").then(n=>n.o);return{cancelOrder:f}},__vite__mapDeps([0,1,2])),u=await t(this.currentPaymentOrder.orderNo||this.currentPaymentOrder.id);u.success?(this.showNotification("订单已取消"),this.loadOrders()):this.showNotification("订单取消失败："+u.message)}catch(t){console.error("取消订单失败:",t),this.showNotification("取消订单失败，请重试")}else this.showNotification("支付已取消，订单保留中");this.closePaymentDialog()},closePaymentDialog(){this.showPaymentDialog=!1,this.stopPaymentTimer(),this.currentPaymentOrder=null,this.paymentStatus="waiting"},async cancelOrder(s){try{const t=await at(s.orderId||s.id);t.success?(this.showNotification("订单取消成功"),s.status="cancelled"):this.showNotification("订单取消失败："+t.message)}catch(t){console.error("取消订单失败:",t),this.showNotification("取消订单失败")}},async decreaseQuantity(s){if(s.quantity>1)try{await this.cartStore.updateQuantity(s.id,s.quantity-1)}catch(t){console.error("更新商品数量失败:",t),this.showNotification("更新商品数量失败")}},async increaseQuantity(s){if(s.quantity<10)try{await this.cartStore.updateQuantity(s.id,s.quantity+1)}catch(t){console.error("更新商品数量失败:",t),this.showNotification("更新商品数量失败")}},async updateQuantity(s){s.quantity<1?s.quantity=1:s.quantity>10&&(s.quantity=10);try{await this.cartStore.updateQuantity(s.id,s.quantity)}catch(t){console.error("更新商品数量失败:",t),this.showNotification("更新商品数量失败")}},async removeFromCart(s){try{await this.cartStore.removeItem(s.id),this.showNotification("商品已从购物车移除")}catch(t){console.error("删除商品失败:",t),this.showNotification("删除商品失败")}},updateCartTotal(){},toggleItemSelect(s){const t=this.cartStore.cartItems.find(u=>u.id===s.id);t&&(t.selected=!t.selected,this.$forceUpdate())},toggleSelectAll(){const s=!this.selectAll;this.cartStore.cartItems.forEach(t=>{t.selected=s}),this.$forceUpdate(),this.updateCartTotal()},applyPromo(){this.promoCode==="PET30"||this.promoCode==="宠物之家"?(this.promoDiscount=30,this.promoMessage="优惠券已应用：立减30元",this.promoMessageType="success",this.showNotification("优惠券应用成功，立减30元！")):this.promoCode?(this.promoMessage="优惠券无效或已过期",this.promoMessageType="error"):(this.promoMessage="请输入优惠券代码",this.promoMessageType="info")},continueShopping(){this.$router.push("/products")},checkout(){if(this.cartItems.length===0){this.showNotification("购物车是空的，请先添加商品");return}if(this.cartItems.some(t=>"selected"in t)&&this.cartItems.filter(u=>u.selected).length===0){this.showNotification("请至少选择一件商品进行结算");return}this.$router.push({path:"/checkout",query:{type:"cart"}})},filterCartItems(){this.cartCurrentPage=1},prevCartPage(){this.cartCurrentPage>1&&this.cartCurrentPage--},nextCartPage(){this.cartCurrentPage<this.cartTotalPages&&this.cartCurrentPage++},goToCartPage(s){typeof s=="number"&&s>=1&&s<=this.cartTotalPages&&(this.cartCurrentPage=s)},goToProduct(s){console.log("跳转到商品详情页，商品ID:",s),s?this.$router.push(`/product/${s}`):this.showNotification("商品信息不完整，无法查看详情")},filterFavorites(){this.favoritesCurrentPage=1},prevFavoritesPage(){this.favoritesCurrentPage>1&&this.favoritesCurrentPage--},nextFavoritesPage(){this.favoritesCurrentPage<this.favoritesTotalPages&&this.favoritesCurrentPage++},async loadFavorites(){try{this.loading=!0;const s=await this.userStore.getUserFavorites();console.log("获取收藏列表:",s),Array.isArray(s)?this.favorites=s.map(t=>({id:t.id,name:t.name||t.productName||"未知商品",description:t.description||t.briefDesc||"",price:t.price||t.finalPrice||0,image:t.image||t.thumbnailUrl||"",type:t.type||"商品",createdAt:t.createdAt||new Date().toISOString()})):this.favorites=[]}catch(s){console.error("获取收藏列表失败:",s),this.favorites=[]}finally{this.loading=!1}},async addToCartFromFavorites(s){try{await this.cartStore.addItem({productId:s.id,spec:"标准装",quantity:1}),this.showNotification(`已将 ${s.name} 加入购物车`)}catch(t){console.error("添加到购物车失败:",t),this.showNotification("添加到购物车失败")}},async removeFromFavorites(s){try{await this.userStore.removeFavorite(s),this.favorites=this.favorites.filter(t=>t.id!==s),this.showNotification("已取消收藏")}catch(t){console.error("取消收藏失败:",t),this.showNotification("取消收藏失败")}},async loadAppointments(){try{this.loading=!0;const s=await this.userStore.getAllUserAppointments();console.log("获取预约列表:",s),Array.isArray(s)?this.appointments=s.map(t=>({id:t.id,orderNo:t.orderNo||`ORD-${t.id}`,serviceName:t.serviceName||t.service?.itemName||"未知服务",petName:t.petName||t.pet?.name||"未知宠物",appointmentDate:t.appointmentDate,timeSlot:t.timeSlot,orderTotalAmount:t.orderTotalAmount||t.totalAmount||0,status:t.status||"pending",specialNotes:t.specialNotes||"",petId:t.petId,serviceId:t.serviceId,createdAt:t.createdAt,updatedAt:t.updatedAt})):this.appointments=[]}catch(s){console.error("获取预约列表失败:",s),this.appointments=[]}finally{this.loading=!1}},openAppointmentDialog(){this.showAppointmentDialog=!0,this.loadPetsForAppointment(),this.loadServicesForAppointment()},closeAppointmentDialog(){this.showAppointmentDialog=!1,this.resetAppointmentForm()},resetAppointmentForm(){this.appointmentForm={petId:"",serviceId:"",appointmentDate:"",timeSlot:"",specialNotes:""}},async loadPetsForAppointment(){try{const s=await this.userStore.getUserPets();console.log("获取宠物列表:",s),Array.isArray(s)?this.pets=s.map(t=>({id:t.id,name:t.name||"未命名",breed:t.breed||"未知品种",type:t.type||t.pet_type||"未知"})):this.pets=[]}catch(s){console.error("获取宠物列表失败:",s),this.pets=[]}},async loadServicesForAppointment(){try{const s=await this.userStore.getServiceItems();console.log("获取服务列表:",s),Array.isArray(s)?this.services=s.map(t=>({id:t.id,itemName:t.itemName||t.name||"未知服务",finalPrice:t.finalPrice||t.price||0})):this.services=[]}catch(s){console.error("获取服务列表失败:",s),this.services=[]}},async submitAppointment(){try{if(!this.appointmentForm.petId||!this.appointmentForm.serviceId||!this.appointmentForm.appointmentDate||!this.appointmentForm.timeSlot){this.showNotification("请填写完整的预约信息");return}const s={petId:parseInt(this.appointmentForm.petId),serviceId:parseInt(this.appointmentForm.serviceId),appointmentDate:this.appointmentForm.appointmentDate,timeSlot:this.appointmentForm.timeSlot,specialNotes:this.appointmentForm.specialNotes||""};console.log("提交预约数据:",s);const t=await this.userStore.createAppointment(s);console.log("预约结果:",t),this.showNotification("预约创建成功！"),this.closeAppointmentDialog(),this.loadAppointments()}catch(s){console.error("创建预约失败:",s),this.showNotification(s.message||"预约失败，请稍后重试")}},viewAppointmentDetail(s){this.$router.push(`/service/appointment/${s.id}`)},goToProfile(){this.$router.push("/profile")},async cancelAppointment(s){if(confirm(`确定要取消预约 ${s.orderNo} 吗？`))try{await this.userStore.cancelAppointment(s.id,"用户主动取消"),s.status="cancelled",this.showNotification("预约已取消")}catch(t){console.error("取消预约失败:",t),this.showNotification("取消预约失败")}},rebookAppointment(s){this.appointmentForm={petId:s.petId?.toString()||"",serviceId:s.serviceId?.toString()||"",appointmentDate:"",timeSlot:"",specialNotes:s.specialNotes||""},this.openAppointmentDialog()},toggleOrderDetail(s){s.showDetail=!s.showDetail},async loadUserInfo(){try{if(!this.userStore){console.warn("userStore未初始化"),this.userInfo={name:"用户",level:"普通会员"};return}if(!this.userStore.checkAuthStatus()){console.warn("用户未登录"),this.userInfo={name:"游客",level:"普通会员"};return}let t=this.userStore.userInfo;if(!t)try{t=await this.userStore.fetchUserInfo()}catch(u){console.error("从后端获取用户信息失败:",u)}t?this.userInfo={name:t.username||t.name||t.nickname||"用户",level:t.level||t.memberLevel||"普通会员"}:this.userInfo={name:"用户",level:"普通会员"}}catch(s){console.error("获取用户信息失败:",s),this.userInfo={name:"用户",level:"普通会员"}}},openProfileEditDialog(){this.profileEditForm={name:this.userInfo.name||"",nickname:this.userInfo.nickname||"",gender:this.userInfo.gender||"",birthday:this.userInfo.birthday||"",bio:this.userInfo.bio||""},this.showProfileEditDialog=!0},closeProfileEditDialog(){this.showProfileEditDialog=!1,this.profileEditForm={name:"",nickname:"",gender:"",birthday:"",bio:""}},openPasswordDialog(){this.showPasswordDialog=!0},closePasswordDialog(){this.showPasswordDialog=!1,this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""}},openPhoneDialog(){this.showPhoneDialog=!0},closePhoneDialog(){this.showPhoneDialog=!1,this.phoneForm={phone:"",verificationCode:""}},openEmailDialog(){this.showEmailDialog=!0},closeEmailDialog(){this.showEmailDialog=!1,this.emailForm={email:"",verificationCode:""}},async saveProfile(){try{const s=await O({url:"/api/user/info",method:"PUT",data:{name:this.profileEditForm.name,nickname:this.profileEditForm.name,gender:this.profileEditForm.gender,birthday:this.profileEditForm.birthday,bio:this.profileEditForm.bio}});s.code===200?(this.userInfo.name=this.profileEditForm.name,this.userInfo.nickname=this.profileEditForm.name,this.userInfo.gender=this.profileEditForm.gender,this.userInfo.birthday=this.profileEditForm.birthday,this.userInfo.bio=this.profileEditForm.bio,this.showNotification("个人信息保存成功"),this.closeProfileEditDialog(),await this.userStore.fetchUserInfo()):this.showNotification(s.message||"保存失败")}catch(s){console.error("保存个人信息失败:",s),this.showNotification("保存个人信息失败")}},async changePassword(){if(!this.passwordForm.currentPassword||!this.passwordForm.newPassword||!this.passwordForm.confirmPassword){this.showNotification("请填写完整的密码信息");return}if(this.passwordForm.newPassword!==this.passwordForm.confirmPassword){this.showNotification("两次输入的新密码不一致");return}if(this.passwordForm.newPassword.length<6){this.showNotification("新密码长度不能少于6位");return}try{const s=await O({url:"/api/user/password",method:"PUT",data:{currentPassword:this.passwordForm.currentPassword,newPassword:this.passwordForm.newPassword}});s.code===200?(this.showNotification("密码修改成功，请重新登录"),this.closePasswordDialog(),this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{this.logout()},2e3)):this.showNotification(s.message||"密码修改失败")}catch(s){console.error("修改密码失败:",s),this.showNotification(s.response?.data?.message||"密码修改失败")}},logout(){confirm("确定要退出登录吗？")&&(this.userStore.logout(),this.$router.push("/auth"))},async changePhone(){if(!this.phoneForm.phone||!this.phoneForm.verificationCode){this.showNotification("请填写完整的手机号和验证码");return}if(!/^1[3-9]\d{9}$/.test(this.phoneForm.phone)){this.showNotification("请输入正确的手机号码");return}try{this.userInfo.phone=this.phoneForm.phone,this.showNotification("手机号绑定成功"),this.closePhoneDialog()}catch(t){console.error("绑定手机号失败:",t),this.showNotification("绑定手机号失败")}},async sendPhoneCode(){if(!this.phoneForm.phone){this.showNotification("请先输入手机号");return}if(!/^1[3-9]\d{9}$/.test(this.phoneForm.phone)){this.showNotification("请输入正确的手机号码");return}try{this.showNotification("验证码已发送")}catch(t){console.error("发送验证码失败:",t),this.showNotification("发送验证码失败")}},async changeEmail(){if(!this.emailForm.email||!this.emailForm.verificationCode){this.showNotification("请填写完整的邮箱和验证码");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.emailForm.email)){this.showNotification("请输入正确的邮箱地址");return}try{this.userInfo.email=this.emailForm.email,this.showNotification("邮箱绑定成功"),this.closeEmailDialog()}catch(t){console.error("绑定邮箱失败:",t),this.showNotification("绑定邮箱失败")}},async sendEmailCode(){if(!this.emailForm.email){this.showNotification("请先输入邮箱地址");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.emailForm.email)){this.showNotification("请输入正确的邮箱地址");return}try{this.showNotification("验证码已发送")}catch(t){console.error("发送验证码失败:",t),this.showNotification("发送验证码失败")}},async saveSettings(){try{this.showNotification("设置保存成功")}catch(s){console.error("保存设置失败:",s),this.showNotification("保存设置失败")}},upgradeToVip(){this.showNotification("VIP升级功能开发中")},viewMembershipBenefits(){this.showNotification("会员权益页面开发中")},viewPointsHistory(){this.showNotification("积分明细页面开发中")},viewInsuranceOptions(){this.showNotification("宠物保险页面开发中")},viewCustomServices(){this.showNotification("定制服务页面开发中")},viewReferralProgram(){this.showNotification("推荐奖励页面开发中")},confirmDeleteAccount(){confirm("确定要注销账户吗？此操作不可恢复！")&&(this.showDeleteAccountDialog=!0)},async deleteAccount(){try{const s=await O({url:"/api/user/delete",method:"DELETE"});s.code===200?(this.showNotification("账户注销成功"),this.userStore.logout(),this.$router.push("/auth")):this.showNotification(s.message||"注销账户失败")}catch(s){console.error("注销账户失败:",s),this.showNotification("注销账户失败")}},showNotification(s){alert(s)},async loadAddresses(){try{const s=await rt();s.success?this.addresses=s.data.map(t=>({...t,recipientName:t.receiverName,phone:t.receiverPhone,detailAddress:t.address,fullAddress:t.fullAddress||`${t.province}${t.city}${t.district}${t.address}`})):this.showNotification("获取地址列表失败："+s.message)}catch(s){console.error("获取地址列表失败:",s),this.showNotification("获取地址列表失败")}},openAddDialog(){this.editingAddress=null,this.resetAddressForm(),this.showAddressDialog=!0},openEditDialog(s){this.editingAddress=s,this.addressForm={recipientName:s.recipientName,phone:s.phone,province:s.province,city:s.city,district:s.district,detailAddress:s.detailAddress,isDefault:s.isDefault},this.showAddressDialog=!0},closeAddressDialog(){this.showAddressDialog=!1,this.editingAddress=null,this.resetAddressForm()},confirmDeleteAddress(s){this.deletingAddress=s,this.showDeleteDialog=!0},closeDeleteDialog(){this.showDeleteDialog=!1,this.deletingAddress=null},async confirmDelete(){if(this.deletingAddress)try{const s=await nt(this.deletingAddress.id);s.success?(this.showNotification("地址删除成功"),await this.loadAddresses()):this.showNotification("地址删除失败："+s.message)}catch(s){console.error("删除地址失败:",s),this.showNotification("删除地址失败")}this.closeDeleteDialog()},async setDefaultAddress(s){try{const t=await ot(s);t.success?(this.showNotification("默认地址设置成功"),await this.loadAddresses()):this.showNotification("设置默认地址失败："+t.message)}catch(t){console.error("设置默认地址失败:",t),this.showNotification("设置默认地址失败")}},onProvinceChange(){this.addressForm.city="",this.addressForm.district=""},onCityChange(){this.addressForm.district=""},cancelAddressForm(){this.closeAddressDialog()},resetAddressForm(){this.addressForm={recipientName:"",phone:"",province:"",city:"",district:"",detailAddress:"",isDefault:!1}},async saveAddress(){if(!this.addressForm.recipientName||!this.addressForm.phone||!this.addressForm.province||!this.addressForm.city||!this.addressForm.district||!this.addressForm.detailAddress){this.showNotification("请填写完整的地址信息");return}if(!/^1[3-9]\d{9}$/.test(this.addressForm.phone)){this.showNotification("请输入正确的手机号码");return}if(!(this.addressForm.isDefault&&this.addresses.some(u=>u.isDefault&&(!this.editingAddress||u.id!==this.editingAddress.id))&&!confirm("已存在默认地址，设置此地址为默认将取消其他默认地址，是否继续？")))try{const t=`${this.addressForm.province}${this.addressForm.city}${this.addressForm.district}${this.addressForm.detailAddress}`,u={...this.addressForm,fullAddress:t};if(this.editingAddress){const f=await st(this.editingAddress.id,u);f.success?(this.showNotification("地址修改成功"),await this.loadAddresses()):this.showNotification("地址修改失败："+f.message)}else{const f=await it(u);f.success?(this.showNotification("地址添加成功"),await this.loadAddresses()):this.showNotification("地址添加失败："+f.message)}this.cancelAddressForm()}catch(t){console.error("保存地址失败:",t),this.showNotification("保存地址失败")}}},mounted(){const s=this.$route.query.tab;s&&["orders","cart","favorites","address","appointments","settings"].includes(s)&&(this.activeTab=s),this.loadUserInfo(),this.activeTab==="orders"?this.loadOrders():this.activeTab==="cart"?this.loadCartItems():this.activeTab==="favorites"?this.loadFavorites():this.activeTab==="address"?this.loadAddresses():this.activeTab==="appointments"&&this.loadAppointments(),this.cartStore.loadCart(),this.startGlobalTimer()},beforeUnmount(){this.stopPaymentTimer(),this.stopGlobalTimer()}},de={class:"user-center-page"},ce={class:"container"},ue={class:"sidebar"},me={class:"user-info-card"},pe={class:"user-avatar"},he={class:"user-details"},ge={class:"user-level"},fe={class:"user-stats"},ve={class:"stat-item"},ye={class:"stat-number"},we={class:"stat-item"},be={class:"stat-number"},Ce={class:"nav-menu"},Pe={key:0,class:"nav-badge"},ke={key:0,class:"nav-badge"},De={class:"main-content"},Fe={class:"content-section"},Ne={class:"content-section"},Ae={class:"content-header"},Se={class:"cart-search"},Te={key:0,class:"loading-state"},Ie={class:"loading-spinner"},Ee={key:1,class:"empty-state"},_e={class:"empty-icon"},xe={key:2,class:"cart-content"},Oe={class:"cart-items-card"},qe={class:"cart-select-all"},Me=["checked"],Ue={class:"selected-info"},Le=["checked","onChange"],Ve={class:"cart-item-image"},Re=["src","alt"],ze={class:"cart-item-details"},Ke={class:"cart-item-controls"},Qe={class:"quantity-control"},Ge=["onClick"],Be=["onUpdate:modelValue","onChange"],He=["onClick"],je={class:"cart-item-price"},Je=["onClick"],Ye={key:0,class:"cart-pagination-bottom"},We={class:"pagination-info"},Xe={class:"pagination-controls"},Ze=["disabled"],$e={class:"page-numbers"},ts=["onClick"],es=["disabled"],ss={class:"cart-summary-card"},is={class:"summary-header"},os={class:"summary-total-price"},ns={class:"summary-details"},rs={class:"summary-row"},as={key:0,class:"summary-row"},ls={class:"cart-actions"},ds={class:"content-section"},cs={class:"content-header"},us={class:"favorites-search"},ms={key:0,class:"loading-state"},ps={class:"loading-spinner"},hs={key:1,class:"empty-state"},gs={class:"empty-icon"},fs={key:2,class:"favorites-content"},vs={key:0,class:"favorites-pagination"},ys=["disabled"],ws={class:"page-info"},bs=["disabled"],Cs={class:"favorites-list"},Ps={class:"favorite-image"},ks=["src","alt"],Ds={class:"favorite-details"},Fs={class:"favorite-main-info"},Ns={class:"favorite-name"},As={key:0,class:"favorite-description"},Ss={class:"favorite-meta-info"},Ts={class:"meta-row"},Is={class:"meta-item"},Es={class:"favorite-type"},_s={class:"meta-item"},xs={class:"favorite-time"},Os={class:"meta-row"},qs={class:"meta-item"},Ms={class:"product-id"},Us={key:0,class:"meta-item"},Ls={class:"product-brand"},Vs={class:"favorite-actions-area"},Rs={class:"favorite-price-section"},zs={class:"current-price"},Ks={key:0,class:"original-price"},Qs={class:"favorite-actions"},Gs=["onClick"],Bs=["onClick"],Hs=["onClick"],js={class:"content-section"},Js={class:"content-header"},Ys={key:0,class:"empty-state"},Ws={class:"empty-icon"},Xs={key:1,class:"address-list"},Zs={class:"address-header"},$s={class:"address-info"},ti={class:"recipient-name"},ei={class:"recipient-phone"},si={key:0,class:"default-tag"},ii={class:"address-actions"},oi=["onClick"],ni=["onClick"],ri={class:"address-detail"},ai={class:"address-footer"},li=["onClick"],di={class:"content-section"},ci={class:"content-header"},ui={class:"appointment-filter-tabs"},mi={key:0,class:"filter-badge"},pi={key:0,class:"loading-state"},hi={class:"loading-spinner"},gi={key:1,class:"empty-state"},fi={class:"empty-icon"},vi={key:2,class:"appointments-list"},yi={class:"appointment-left"},wi={class:"appointment-main-info"},bi={class:"service-name"},Ci={class:"order-no"},Pi={class:"appointment-meta"},ki={class:"meta-item"},Di={class:"meta-item"},Fi={class:"meta-item"},Ni={key:0,class:"special-notes"},Ai={class:"appointment-center"},Si={class:"appointment-price"},Ti={class:"appointment-right"},Ii={class:"appointment-actions"},Ei=["onClick"],_i=["onClick"],xi={class:"content-section"},Oi={class:"settings-content"},qi={class:"setting-group"},Mi={class:"setting-item"},Ui={class:"setting-group"},Li={class:"setting-item"},Vi={class:"setting-info"},Ri={class:"setting-desc"},zi={class:"setting-group"},Ki={class:"setting-item"},Qi={class:"dialog-header"},Gi={class:"form-row"},Bi={class:"form-group"},Hi={class:"form-group"},ji={class:"form-row"},Ji={class:"form-group"},Yi={class:"form-group"},Wi=["value"],Xi={class:"form-group"},Zi=["value"],$i={class:"form-group"},to={class:"form-group"},eo={class:"checkbox-label"},so={class:"dialog-actions"},io={type:"submit",class:"btn-save"},oo={class:"dialog-header"},no={class:"dialog-content"},ro={class:"delete-address-info"},ao={class:"dialog-actions"},lo={class:"dialog-header"},co={class:"form-group"},uo={class:"form-row"},mo={class:"form-group"},po={class:"form-group"},ho={class:"form-group"},go={class:"dialog-actions"},fo={class:"dialog-header"},vo={class:"form-group"},yo={class:"form-group"},wo={class:"form-group"},bo={class:"dialog-actions"},Co={class:"dialog-header"},Po={class:"form-group"},ko={class:"form-group"},Do={class:"verification-input"},Fo={class:"dialog-actions"},No={class:"dialog-header"},Ao={class:"form-group"},So={class:"form-group"},To={class:"verification-input"},Io={class:"dialog-actions"},Eo={class:"dialog-header"},_o={class:"payment-content compact-content"},xo={class:"payment-summary"},Oo={class:"order-info"},qo={class:"order-number"},Mo={class:"payment-amount"},Uo={class:"amount-value"},Lo={key:0,class:"payment-main"},Vo={class:"payment-methods-section"},Ro={class:"payment-options compact-options"},zo={class:"payment-icon wechat"},Ko={class:"payment-icon alipay"},Qo={class:"payment-icon unionpay"},Go={class:"qr-code-section compact-qr"},Bo={class:"qr-code"},Ho={class:"qr-instruction"},jo={key:0,class:"warning-text"},Jo={key:1,class:"payment-success"},Yo={class:"success-icon"},Wo={key:2,class:"payment-tips compact-tips"},Xo={class:"tips-content"},Zo={class:"payment-actions compact-actions"},$o=["disabled"];function tn(s,t,u,f,n,o){const d=L("Icon"),I=L("MyOrders");return r(),a("div",de,[e("div",ce,[e("div",ue,[e("div",me,[e("div",{class:"edit-profile-btn",onClick:t[0]||(t[0]=(...i)=>o.openProfileEditDialog&&o.openProfileEditDialog(...i)),title:"编辑个人信息"},[l(d,{icon:"mdi:pencil"})]),e("div",pe,[l(d,{icon:"mdi:account"})]),e("div",he,[e("h3",null,c(n.userInfo.name||"爱宠人士张先生"),1),e("div",ge,c(n.userInfo.level||"黄金会员"),1)]),e("div",fe,[e("div",ve,[e("div",ye,c(o.completedOrderCount),1),t[94]||(t[94]=e("div",{class:"stat-label"},"交易成功",-1))]),e("div",we,[e("div",be,c(o.cartCount),1),t[95]||(t[95]=e("div",{class:"stat-label"},"购物车",-1))])])]),e("div",Ce,[e("div",{class:w(["nav-item",{active:n.activeTab==="orders"}]),onClick:t[1]||(t[1]=i=>o.switchTab("orders"))},[l(d,{icon:"mdi:clipboard-list"}),t[96]||(t[96]=e("span",null,"我的订单",-1)),o.orderCount>0?(r(),a("span",Pe,c(o.orderCount),1)):v("",!0)],2),e("div",{class:w(["nav-item",{active:n.activeTab==="cart"}]),onClick:t[2]||(t[2]=i=>o.switchTab("cart"))},[l(d,{icon:"mdi:cart"}),t[97]||(t[97]=e("span",null,"购物车",-1)),o.cartCount>0?(r(),a("span",ke,c(o.cartCount),1)):v("",!0)],2),e("div",{class:w(["nav-item",{active:n.activeTab==="favorites"}]),onClick:t[3]||(t[3]=i=>o.switchTab("favorites"))},[l(d,{icon:"mdi:heart"}),t[98]||(t[98]=e("span",null,"我的收藏",-1))],2),e("div",{class:w(["nav-item",{active:n.activeTab==="address"}]),onClick:t[4]||(t[4]=i=>o.switchTab("address"))},[l(d,{icon:"mdi:map-marker"}),t[99]||(t[99]=e("span",null,"收货地址",-1))],2),e("div",{class:w(["nav-item",{active:n.activeTab==="appointments"}]),onClick:t[5]||(t[5]=i=>o.switchTab("appointments"))},[l(d,{icon:"mdi:calendar-check"}),t[100]||(t[100]=e("span",null,"我的预约",-1))],2),e("div",{class:w(["nav-item",{active:n.activeTab==="settings"}]),onClick:t[6]||(t[6]=i=>o.switchTab("settings"))},[l(d,{icon:"mdi:cog"}),t[101]||(t[101]=e("span",null,"账户设置",-1))],2)])]),e("div",De,[y(e("div",Fe,[l(I,{orders:n.orders,loading:n.loading,onContinueShopping:o.continueShopping,onGoToProduct:o.goToProduct,onReorder:o.reorder,onPayOrder:o.payOrder,onCancelOrder:o.cancelOrder,onClearTrash:o.clearTrash,onDeleteOrder:o.deleteOrder},null,8,["orders","loading","onContinueShopping","onGoToProduct","onReorder","onPayOrder","onCancelOrder","onClearTrash","onDeleteOrder"])],512),[[T,n.activeTab==="orders"]]),y(e("div",Ne,[e("div",Ae,[t[102]||(t[102]=e("h2",null,"我的购物车",-1)),e("p",null,"已选择 "+c(o.selectedCount)+" 件商品",1),e("div",Se,[y(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=i=>n.cartSearchKeyword=i),placeholder:"搜索购物车商品...",class:"search-input",onInput:t[8]||(t[8]=(...i)=>o.filterCartItems&&o.filterCartItems(...i))},null,544),[[P,n.cartSearchKeyword]]),l(d,{icon:"mdi:magnify",class:"search-icon"})])]),n.loading?(r(),a("div",Te,[e("div",Ie,[l(d,{icon:"mdi:loading",class:"spin"}),t[103]||(t[103]=e("span",null,"加载中...",-1))])])):o.cartItems.length===0?(r(),a("div",Ee,[e("div",_e,[l(d,{icon:"mdi:cart"})]),t[105]||(t[105]=e("div",{class:"empty-title"},"购物车是空的",-1)),t[106]||(t[106]=e("div",{class:"empty-description"},"您还没有添加任何商品到购物车",-1)),e("button",{class:"empty-action",onClick:t[9]||(t[9]=(...i)=>o.continueShopping&&o.continueShopping(...i))},[l(d,{icon:"mdi:shopping"}),t[104]||(t[104]=h(" 去商店逛逛 ",-1))])])):(r(),a("div",xe,[e("div",Oe,[e("div",qe,[e("input",{type:"checkbox",checked:o.selectAll,onChange:t[10]||(t[10]=(...i)=>o.toggleSelectAll&&o.toggleSelectAll(...i)),class:"cart-checkbox"},null,40,Me),t[107]||(t[107]=e("span",{class:"select-all-text"},"全选",-1)),e("span",Ue,"已选 "+c(o.selectedCount)+" 件商品",1)]),(r(!0),a(N,null,A(o.paginatedCartItems,i=>(r(),a("div",{key:i.id,class:"cart-item"},[e("input",{type:"checkbox",checked:i.selected,onChange:b=>o.toggleItemSelect(i),class:"cart-checkbox"},null,40,Le),e("div",Ve,[i.image?(r(),a("img",{key:0,src:i.image,alt:i.name},null,8,Re)):(r(),_(d,{key:1,icon:"mdi:image"}))]),e("div",ze,[e("h4",null,c(i.name),1),e("p",null,c(i.spec),1)]),e("div",Ke,[e("div",Qe,[e("button",{class:"quantity-btn",onClick:b=>o.decreaseQuantity(i)},"-",8,Ge),y(e("input",{type:"number","onUpdate:modelValue":b=>i.quantity=b,onChange:b=>o.updateQuantity(i),min:"1",max:"10",class:"quantity-input"},null,40,Be),[[P,i.quantity,void 0,{number:!0}]]),e("button",{class:"quantity-btn",onClick:b=>o.increaseQuantity(i)},"+",8,He)]),e("div",je,"¥"+c(i.price.toFixed(2)),1),e("button",{class:"cart-item-remove",onClick:b=>o.removeFromCart(i)},[l(d,{icon:"mdi:delete"})],8,Je)])]))),128)),o.filteredCartItems.length>n.cartPageSize?(r(),a("div",Ye,[e("div",We,[e("span",null,"共 "+c(o.filteredCartItems.length)+" 件商品，第 "+c(n.cartCurrentPage)+" / "+c(o.cartTotalPages)+" 页",1)]),e("div",Xe,[e("button",{onClick:t[11]||(t[11]=(...i)=>o.prevCartPage&&o.prevCartPage(...i)),disabled:n.cartCurrentPage===1,class:"page-btn"},[l(d,{icon:"mdi:chevron-left"}),t[108]||(t[108]=h(" 上一页 ",-1))],8,Ze),e("span",$e,[(r(!0),a(N,null,A(o.getPageNumbers,i=>(r(),a("button",{key:i,onClick:b=>o.goToCartPage(i),class:w(["page-number",{active:i===n.cartCurrentPage}])},c(i),11,ts))),128))]),e("button",{onClick:t[12]||(t[12]=(...i)=>o.nextCartPage&&o.nextCartPage(...i)),disabled:n.cartCurrentPage===o.cartTotalPages,class:"page-btn"},[t[109]||(t[109]=h(" 下一页 ",-1)),l(d,{icon:"mdi:chevron-right"})],8,es)])])):v("",!0)]),e("div",ss,[e("div",is,[t[110]||(t[110]=e("h3",null,"订单总计",-1)),e("div",os,"¥"+c(o.cartTotal.toFixed(2)),1)]),e("div",ns,[e("div",rs,[t[111]||(t[111]=e("span",null,"商品总价",-1)),e("span",null,"¥"+c(o.cartSubtotal.toFixed(2)),1)]),t[113]||(t[113]=e("div",{class:"summary-row"},[e("span",null,"运费"),e("span",null,"¥0.00")],-1)),n.promoDiscount>0?(r(),a("div",as,[t[112]||(t[112]=e("span",null,"优惠折扣",-1)),e("span",null,"-¥"+c(n.promoDiscount.toFixed(2)),1)])):v("",!0)]),e("div",ls,[e("button",{class:"cart-action-btn continue-shopping",onClick:t[13]||(t[13]=(...i)=>o.continueShopping&&o.continueShopping(...i))},[l(d,{icon:"mdi:shopping"}),t[114]||(t[114]=h(" 继续购物 ",-1))]),e("button",{class:"cart-action-btn checkout-btn",onClick:t[14]||(t[14]=(...i)=>o.checkout&&o.checkout(...i))},[l(d,{icon:"mdi:credit-card"}),h(" 去结算 (¥"+c(o.cartTotal.toFixed(2))+") ",1)])])])]))],512),[[T,n.activeTab==="cart"]]),y(e("div",ds,[e("div",cs,[t[115]||(t[115]=e("h2",null,"我的收藏",-1)),e("p",null,"您收藏的商品，共 "+c(n.favorites.length)+" 件",1),e("div",us,[y(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=i=>n.favoritesSearchKeyword=i),placeholder:"搜索收藏的商品...",class:"search-input",onInput:t[16]||(t[16]=(...i)=>o.filterFavorites&&o.filterFavorites(...i))},null,544),[[P,n.favoritesSearchKeyword]]),l(d,{icon:"mdi:magnify",class:"search-icon"})])]),n.loading?(r(),a("div",ms,[e("div",ps,[l(d,{icon:"mdi:loading",class:"spin"}),t[116]||(t[116]=e("span",null,"加载中...",-1))])])):o.filteredFavorites.length===0?(r(),a("div",hs,[e("div",gs,[l(d,{icon:"mdi:heart"})]),t[118]||(t[118]=e("div",{class:"empty-title"},"暂无收藏",-1)),t[119]||(t[119]=e("div",{class:"empty-description"},"您还没有收藏任何商品",-1)),e("button",{class:"empty-action",onClick:t[17]||(t[17]=(...i)=>o.continueShopping&&o.continueShopping(...i))},[l(d,{icon:"mdi:shopping"}),t[117]||(t[117]=h(" 去逛逛 ",-1))])])):(r(),a("div",fs,[o.filteredFavorites.length>n.favoritesPageSize?(r(),a("div",vs,[e("button",{onClick:t[18]||(t[18]=(...i)=>o.prevFavoritesPage&&o.prevFavoritesPage(...i)),disabled:n.favoritesCurrentPage===1,class:"page-btn"},[l(d,{icon:"mdi:chevron-left"})],8,ys),e("span",ws,c(n.favoritesCurrentPage)+" / "+c(o.favoritesTotalPages),1),e("button",{onClick:t[19]||(t[19]=(...i)=>o.nextFavoritesPage&&o.nextFavoritesPage(...i)),disabled:n.favoritesCurrentPage===o.favoritesTotalPages,class:"page-btn"},[l(d,{icon:"mdi:chevron-right"})],8,bs)])):v("",!0),e("div",Cs,[(r(!0),a(N,null,A(o.paginatedFavorites,i=>(r(),a("div",{key:i.id,class:"favorite-item"},[e("div",Ps,[i.image?(r(),a("img",{key:0,src:i.image,alt:i.name},null,8,ks)):(r(),_(d,{key:1,icon:"mdi:image"}))]),e("div",Ds,[e("div",Fs,[e("h4",Ns,c(i.name),1),i.description?(r(),a("p",As,c(i.description),1)):v("",!0)]),e("div",Ss,[e("div",Ts,[e("div",Is,[t[120]||(t[120]=e("span",{class:"meta-label"},"商品类型：",-1)),e("span",Es,c(i.type||"商品"),1)]),e("div",_s,[t[121]||(t[121]=e("span",{class:"meta-label"},"收藏时间：",-1)),e("span",xs,c(o.formatDate(i.createdAt)),1)])]),e("div",Os,[e("div",qs,[t[122]||(t[122]=e("span",{class:"meta-label"},"商品编号：",-1)),e("span",Ms,"#"+c(i.id),1)]),i.brand?(r(),a("div",Us,[t[123]||(t[123]=e("span",{class:"meta-label"},"品牌：",-1)),e("span",Ls,c(i.brand),1)])):v("",!0)])])]),e("div",Vs,[e("div",Rs,[e("div",zs,"¥"+c((i.price||0).toFixed(2)),1),i.originalPrice&&i.originalPrice>i.price?(r(),a("div",Ks," ¥"+c(i.originalPrice.toFixed(2)),1)):v("",!0)]),e("div",Qs,[e("button",{class:"btn-view-detail",onClick:b=>o.goToProduct(i.id)},[l(d,{icon:"mdi:eye"}),t[124]||(t[124]=h(" 查看详情 ",-1))],8,Gs),e("button",{class:"btn-add-cart",onClick:b=>o.addToCartFromFavorites(i)},[l(d,{icon:"mdi:cart-plus"}),t[125]||(t[125]=h(" 加入购物车 ",-1))],8,Bs),e("button",{class:"btn-remove-favorite",onClick:b=>o.removeFromFavorites(i.id)},[l(d,{icon:"mdi:heart-remove"}),t[126]||(t[126]=h(" 取消收藏 ",-1))],8,Hs)])])]))),128))])]))],512),[[T,n.activeTab==="favorites"]]),y(e("div",js,[e("div",Js,[t[128]||(t[128]=e("h2",null,"收货地址",-1)),t[129]||(t[129]=e("p",null,"管理您的收货地址信息",-1)),e("button",{class:"action-btn action-btn-primary",onClick:t[20]||(t[20]=(...i)=>o.openAddDialog&&o.openAddDialog(...i))},[l(d,{icon:"mdi:plus"}),t[127]||(t[127]=h(" 添加地址 ",-1))])]),n.addresses.length===0?(r(),a("div",Ys,[e("div",Ws,[l(d,{icon:"mdi:map-marker"})]),t[131]||(t[131]=e("div",{class:"empty-title"},"暂无地址",-1)),t[132]||(t[132]=e("div",{class:"empty-description"},"您还没有添加收货地址",-1)),e("button",{class:"empty-action",onClick:t[21]||(t[21]=(...i)=>o.openAddDialog&&o.openAddDialog(...i))},[l(d,{icon:"mdi:plus"}),t[130]||(t[130]=h(" 添加地址 ",-1))])])):(r(),a("div",Xs,[(r(!0),a(N,null,A(n.addresses,i=>(r(),a("div",{key:i.id,class:"address-card"},[e("div",Zs,[e("div",$s,[e("span",ti,c(i.recipientName),1),e("span",ei,c(i.phone),1),i.isDefault?(r(),a("span",si,"默认")):v("",!0)]),e("div",ii,[e("button",{class:"action-link",onClick:b=>o.openEditDialog(i)},[l(d,{icon:"mdi:pencil"}),t[133]||(t[133]=h(" 编辑 ",-1))],8,oi),e("button",{class:"action-link danger",onClick:b=>o.confirmDeleteAddress(i)},[l(d,{icon:"mdi:delete"}),t[134]||(t[134]=h(" 删除 ",-1))],8,ni)])]),e("div",ri,[l(d,{icon:"mdi:map-marker"}),e("span",null,c(i.fullAddress),1)]),e("div",ai,[i.isDefault?v("",!0):(r(),a("button",{key:0,class:"set-default-btn",onClick:b=>o.setDefaultAddress(i.id)}," 设为默认 ",8,li))])]))),128))]))],512),[[T,n.activeTab==="address"]]),y(e("div",di,[e("div",ci,[t[136]||(t[136]=e("h2",null,"我的预约",-1)),t[137]||(t[137]=e("p",null,"查看您的服务预约记录",-1)),e("button",{class:"action-btn action-btn-primary",onClick:t[22]||(t[22]=(...i)=>o.goToNewAppointment&&o.goToNewAppointment(...i))},[l(d,{icon:"mdi:plus"}),t[135]||(t[135]=h(" 新建预约 ",-1))])]),e("div",ui,[e("div",{class:w(["filter-tab",{active:n.appointmentFilter==="all"}]),onClick:t[23]||(t[23]=i=>o.setAppointmentFilter("all"))}," 全部预约 ",2),e("div",{class:w(["filter-tab",{active:n.appointmentFilter==="pending"}]),onClick:t[24]||(t[24]=i=>o.setAppointmentFilter("pending"))},[t[138]||(t[138]=h(" 待服务 ",-1)),o.getPendingAppointmentCount()>0?(r(),a("span",mi,c(o.getPendingAppointmentCount()),1)):v("",!0)],2),e("div",{class:w(["filter-tab",{active:n.appointmentFilter==="confirmed"}]),onClick:t[25]||(t[25]=i=>o.setAppointmentFilter("confirmed"))}," 已确认 ",2),e("div",{class:w(["filter-tab",{active:n.appointmentFilter==="completed"}]),onClick:t[26]||(t[26]=i=>o.setAppointmentFilter("completed"))}," 已完成 ",2),e("div",{class:w(["filter-tab",{active:n.appointmentFilter==="cancelled"}]),onClick:t[27]||(t[27]=i=>o.setAppointmentFilter("cancelled"))}," 已取消 ",2)]),n.loading?(r(),a("div",pi,[e("div",hi,[l(d,{icon:"mdi:loading",class:"spin"}),t[139]||(t[139]=e("span",null,"加载中...",-1))])])):o.filteredAppointments.length===0?(r(),a("div",gi,[e("div",fi,[l(d,{icon:"mdi:calendar-check"})]),t[141]||(t[141]=e("div",{class:"empty-title"},"暂无预约",-1)),t[142]||(t[142]=e("div",{class:"empty-description"},"您还没有任何服务预约",-1)),e("button",{class:"empty-action",onClick:t[28]||(t[28]=(...i)=>o.openAppointmentDialog&&o.openAppointmentDialog(...i))},[l(d,{icon:"mdi:calendar-plus"}),t[140]||(t[140]=h(" 立即预约 ",-1))])])):(r(),a("div",vi,[(r(!0),a(N,null,A(o.filteredAppointments,i=>(r(),a("div",{key:i.id,class:"appointment-row"},[e("div",yi,[e("div",wi,[e("div",bi,c(i.serviceName),1),e("div",Ci,"订单号："+c(i.orderNo),1)]),e("div",Pi,[e("div",ki,[l(d,{icon:"mdi:paw"}),e("span",null,c(i.petName),1)]),e("div",Di,[l(d,{icon:"mdi:calendar"}),e("span",null,c(o.formatDate(i.appointmentDate)),1)]),e("div",Fi,[l(d,{icon:"mdi:clock"}),e("span",null,c(i.timeSlot),1)])]),i.specialNotes?(r(),a("div",Ni,[l(d,{icon:"mdi:note-text"}),e("span",null,c(i.specialNotes),1)])):v("",!0)]),e("div",Ai,[e("div",{class:w(["appointment-status",o.getStatusClass(i.status)])},c(o.getStatusText(i.status)),3),e("div",Si,"¥"+c(i.orderTotalAmount),1)]),e("div",Ti,[e("div",Ii,[e("button",{class:"action-btn action-btn-secondary",onClick:b=>o.viewAppointmentDetail(i)},[l(d,{icon:"mdi:eye"}),t[143]||(t[143]=h(" 查看详情 ",-1))],8,Ei),i.status==="pending"?(r(),a("button",{key:0,class:"action-btn action-btn-danger",onClick:b=>o.cancelAppointment(i)},[l(d,{icon:"mdi:close"}),t[144]||(t[144]=h(" 取消预约 ",-1))],8,_i)):v("",!0),i.status==="completed"?(r(),a("button",{key:1,class:"action-btn action-btn-primary",onClick:t[29]||(t[29]=(...b)=>o.goToNewAppointment&&o.goToNewAppointment(...b))},[l(d,{icon:"mdi:refresh"}),t[145]||(t[145]=h(" 再次预约 ",-1))])):v("",!0)])])]))),128))]))],512),[[T,n.activeTab==="appointments"]]),y(e("div",xi,[t[155]||(t[155]=e("div",{class:"content-header"},[e("h2",null,"账户设置"),e("p",null,"管理您的账户信息和安全设置")],-1)),e("div",Oi,[e("div",qi,[e("h3",null,[l(d,{icon:"mdi:shield-account"}),t[146]||(t[146]=h(" 账户安全",-1))]),e("div",Mi,[t[148]||(t[148]=e("div",{class:"setting-info"},[e("span",{class:"setting-title"},"登录密码"),e("span",{class:"setting-desc"},"定期更换密码，保护账户安全")],-1)),e("button",{class:"setting-action-btn",onClick:t[30]||(t[30]=(...i)=>o.openPasswordDialog&&o.openPasswordDialog(...i))},[l(d,{icon:"mdi:key"}),t[147]||(t[147]=h(" 修改密码 ",-1))])])]),e("div",Ui,[e("h3",null,[l(d,{icon:"mdi:account-circle"}),t[149]||(t[149]=h(" 个人信息",-1))]),e("div",Li,[e("div",Vi,[t[150]||(t[150]=e("span",{class:"setting-title"},"用户名",-1)),e("span",Ri,c(n.userInfo.name||"未设置"),1)]),e("button",{class:"setting-action-btn",onClick:t[31]||(t[31]=(...i)=>o.openProfileEditDialog&&o.openProfileEditDialog(...i))},[l(d,{icon:"mdi:pencil"}),t[151]||(t[151]=h(" 编辑 ",-1))])])]),e("div",zi,[e("h3",null,[l(d,{icon:"mdi:cog"}),t[152]||(t[152]=h(" 账户操作",-1))]),e("div",Ki,[t[154]||(t[154]=e("div",{class:"setting-info"},[e("span",{class:"setting-title"},"退出登录"),e("span",{class:"setting-desc"},"退出当前账户")],-1)),e("button",{class:"setting-action-btn",onClick:t[32]||(t[32]=(...i)=>o.logout&&o.logout(...i))},[l(d,{icon:"mdi:logout"}),t[153]||(t[153]=h(" 退出登录 ",-1))])])])])],512),[[T,n.activeTab==="settings"]])])]),n.showAddressDialog?(r(),a("div",{key:0,class:"dialog-overlay",onClick:t[46]||(t[46]=(...i)=>o.closeAddressDialog&&o.closeAddressDialog(...i))},[e("div",{class:"dialog-container",onClick:t[45]||(t[45]=F(()=>{},["stop"]))},[e("div",Qi,[e("h3",null,c(n.editingAddress?"编辑地址":"添加地址"),1),e("button",{class:"dialog-close-btn",onClick:t[33]||(t[33]=(...i)=>o.closeAddressDialog&&o.closeAddressDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("form",{class:"dialog-form",onSubmit:t[44]||(t[44]=F((...i)=>o.saveAddress&&o.saveAddress(...i),["prevent"]))},[e("div",Gi,[e("div",Bi,[t[156]||(t[156]=e("label",null,[h("收货人姓名 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[34]||(t[34]=i=>n.addressForm.recipientName=i),placeholder:"请输入收货人姓名",required:""},null,512),[[P,n.addressForm.recipientName]])]),e("div",Hi,[t[157]||(t[157]=e("label",null,[h("手机号码 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"tel","onUpdate:modelValue":t[35]||(t[35]=i=>n.addressForm.phone=i),placeholder:"请输入手机号码",required:""},null,512),[[P,n.addressForm.phone]])])]),e("div",ji,[e("div",Ji,[t[159]||(t[159]=e("label",null,[h("省份 "),e("span",{class:"required"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[36]||(t[36]=i=>n.addressForm.province=i),onChange:t[37]||(t[37]=(...i)=>o.onProvinceChange&&o.onProvinceChange(...i)),required:""},[...t[158]||(t[158]=[Z('<option value="" data-v-8a2633bb>请选择省份</option><option value="北京市" data-v-8a2633bb>北京市</option><option value="上海市" data-v-8a2633bb>上海市</option><option value="广东省" data-v-8a2633bb>广东省</option><option value="浙江省" data-v-8a2633bb>浙江省</option><option value="江苏省" data-v-8a2633bb>江苏省</option>',6)])],544),[[E,n.addressForm.province]])]),e("div",Yi,[t[161]||(t[161]=e("label",null,[h("城市 "),e("span",{class:"required"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[38]||(t[38]=i=>n.addressForm.city=i),onChange:t[39]||(t[39]=(...i)=>o.onCityChange&&o.onCityChange(...i)),required:""},[t[160]||(t[160]=e("option",{value:""},"请选择城市",-1)),(r(!0),a(N,null,A(o.availableCities,i=>(r(),a("option",{key:i,value:i},c(i),9,Wi))),128))],544),[[E,n.addressForm.city]])]),e("div",Xi,[t[163]||(t[163]=e("label",null,[h("区县 "),e("span",{class:"required"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[40]||(t[40]=i=>n.addressForm.district=i),required:""},[t[162]||(t[162]=e("option",{value:""},"请选择区县",-1)),(r(!0),a(N,null,A(o.availableDistricts,i=>(r(),a("option",{key:i,value:i},c(i),9,Zi))),128))],512),[[E,n.addressForm.district]])])]),e("div",$i,[t[164]||(t[164]=e("label",null,[h("详细地址 "),e("span",{class:"required"},"*")],-1)),y(e("textarea",{"onUpdate:modelValue":t[41]||(t[41]=i=>n.addressForm.detailAddress=i),placeholder:"请输入详细地址，如街道、门牌号等",rows:"3",required:""},null,512),[[P,n.addressForm.detailAddress]])]),e("div",to,[e("label",eo,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[42]||(t[42]=i=>n.addressForm.isDefault=i)},null,512),[[$,n.addressForm.isDefault]]),t[165]||(t[165]=e("span",{class:"checkmark"},null,-1)),t[166]||(t[166]=h(" 设为默认地址 ",-1))])]),e("div",so,[e("button",{type:"button",class:"btn-cancel",onClick:t[43]||(t[43]=(...i)=>o.closeAddressDialog&&o.closeAddressDialog(...i))},"取消"),e("button",io,c(n.editingAddress?"保存修改":"保存地址"),1)])],32)])])):v("",!0),n.showDeleteDialog?(r(),a("div",{key:1,class:"dialog-overlay",onClick:t[51]||(t[51]=(...i)=>o.closeDeleteDialog&&o.closeDeleteDialog(...i))},[e("div",{class:"dialog-container small",onClick:t[50]||(t[50]=F(()=>{},["stop"]))},[e("div",oo,[t[167]||(t[167]=e("h3",null,"确认删除",-1)),e("button",{class:"dialog-close-btn",onClick:t[47]||(t[47]=(...i)=>o.closeDeleteDialog&&o.closeDeleteDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("div",no,[t[169]||(t[169]=e("p",null,"确定要删除这个收货地址吗？",-1)),e("div",ro,[e("strong",null,c(n.deletingAddress?.recipientName),1),h(" "+c(n.deletingAddress?.phone),1),t[168]||(t[168]=e("br",null,null,-1)),h(" "+c(n.deletingAddress?.fullAddress),1)])]),e("div",ao,[e("button",{type:"button",class:"btn-cancel",onClick:t[48]||(t[48]=(...i)=>o.closeDeleteDialog&&o.closeDeleteDialog(...i))},"取消"),e("button",{type:"button",class:"btn-danger",onClick:t[49]||(t[49]=(...i)=>o.confirmDelete&&o.confirmDelete(...i))},"确认删除")])])])):v("",!0),n.showProfileEditDialog?(r(),a("div",{key:2,class:"dialog-overlay",onClick:t[60]||(t[60]=(...i)=>o.closeProfileEditDialog&&o.closeProfileEditDialog(...i))},[e("div",{class:"dialog-container",onClick:t[59]||(t[59]=F(()=>{},["stop"]))},[e("div",lo,[t[170]||(t[170]=e("h3",null,"编辑个人信息",-1)),e("button",{class:"dialog-close-btn",onClick:t[52]||(t[52]=(...i)=>o.closeProfileEditDialog&&o.closeProfileEditDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("form",{class:"dialog-form",onSubmit:t[58]||(t[58]=F((...i)=>o.saveProfile&&o.saveProfile(...i),["prevent"]))},[e("div",co,[t[171]||(t[171]=e("label",null,[h("用户名 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=i=>n.profileEditForm.name=i),placeholder:"请输入用户名",required:""},null,512),[[P,n.profileEditForm.name]])]),e("div",uo,[e("div",mo,[t[173]||(t[173]=e("label",null,"性别",-1)),y(e("select",{"onUpdate:modelValue":t[54]||(t[54]=i=>n.profileEditForm.gender=i)},[...t[172]||(t[172]=[e("option",{value:""},"请选择",-1),e("option",{value:"male"},"男",-1),e("option",{value:"female"},"女",-1),e("option",{value:"other"},"其他",-1)])],512),[[E,n.profileEditForm.gender]])]),e("div",po,[t[174]||(t[174]=e("label",null,"生日",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[55]||(t[55]=i=>n.profileEditForm.birthday=i)},null,512),[[P,n.profileEditForm.birthday]])])]),e("div",ho,[t[175]||(t[175]=e("label",null,"个人简介",-1)),y(e("textarea",{"onUpdate:modelValue":t[56]||(t[56]=i=>n.profileEditForm.bio=i),placeholder:"介绍一下自己吧...",rows:"3"},null,512),[[P,n.profileEditForm.bio]])]),e("div",go,[e("button",{type:"button",class:"btn-cancel",onClick:t[57]||(t[57]=(...i)=>o.closeProfileEditDialog&&o.closeProfileEditDialog(...i))},"取消"),t[176]||(t[176]=e("button",{type:"submit",class:"btn-save"},"保存",-1))])],32)])])):v("",!0),n.showPasswordDialog?(r(),a("div",{key:3,class:"dialog-overlay",onClick:t[68]||(t[68]=(...i)=>o.closePasswordDialog&&o.closePasswordDialog(...i))},[e("div",{class:"dialog-container",onClick:t[67]||(t[67]=F(()=>{},["stop"]))},[e("div",fo,[t[177]||(t[177]=e("h3",null,"修改密码",-1)),e("button",{class:"dialog-close-btn",onClick:t[61]||(t[61]=(...i)=>o.closePasswordDialog&&o.closePasswordDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("form",{class:"dialog-form",onSubmit:t[66]||(t[66]=F((...i)=>o.changePassword&&o.changePassword(...i),["prevent"]))},[e("div",vo,[t[178]||(t[178]=e("label",null,[h("当前密码 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"password","onUpdate:modelValue":t[62]||(t[62]=i=>n.passwordForm.currentPassword=i),placeholder:"请输入当前密码",required:""},null,512),[[P,n.passwordForm.currentPassword]])]),e("div",yo,[t[179]||(t[179]=e("label",null,[h("新密码 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"password","onUpdate:modelValue":t[63]||(t[63]=i=>n.passwordForm.newPassword=i),placeholder:"请输入新密码（至少6位）",required:""},null,512),[[P,n.passwordForm.newPassword]])]),e("div",wo,[t[180]||(t[180]=e("label",null,[h("确认新密码 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"password","onUpdate:modelValue":t[64]||(t[64]=i=>n.passwordForm.confirmPassword=i),placeholder:"请再次输入新密码",required:""},null,512),[[P,n.passwordForm.confirmPassword]])]),e("div",bo,[e("button",{type:"button",class:"btn-cancel",onClick:t[65]||(t[65]=(...i)=>o.closePasswordDialog&&o.closePasswordDialog(...i))},"取消"),t[181]||(t[181]=e("button",{type:"submit",class:"btn-save"},"确认修改",-1))])],32)])])):v("",!0),n.showPhoneDialog?(r(),a("div",{key:4,class:"dialog-overlay",onClick:t[76]||(t[76]=(...i)=>o.closePhoneDialog&&o.closePhoneDialog(...i))},[e("div",{class:"dialog-container",onClick:t[75]||(t[75]=F(()=>{},["stop"]))},[e("div",Co,[e("h3",null,c(n.userInfo.phone?"更换手机号":"绑定手机号"),1),e("button",{class:"dialog-close-btn",onClick:t[69]||(t[69]=(...i)=>o.closePhoneDialog&&o.closePhoneDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("form",{class:"dialog-form",onSubmit:t[74]||(t[74]=F((...i)=>o.changePhone&&o.changePhone(...i),["prevent"]))},[e("div",Po,[t[182]||(t[182]=e("label",null,[h("手机号码 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"tel","onUpdate:modelValue":t[70]||(t[70]=i=>n.phoneForm.phone=i),placeholder:"请输入手机号码",required:""},null,512),[[P,n.phoneForm.phone]])]),e("div",ko,[t[183]||(t[183]=e("label",null,[h("验证码 "),e("span",{class:"required"},"*")],-1)),e("div",Do,[y(e("input",{type:"text","onUpdate:modelValue":t[71]||(t[71]=i=>n.phoneForm.verificationCode=i),placeholder:"请输入验证码",required:""},null,512),[[P,n.phoneForm.verificationCode]]),e("button",{type:"button",class:"send-code-btn",onClick:t[72]||(t[72]=(...i)=>o.sendPhoneCode&&o.sendPhoneCode(...i))}," 发送验证码 ")])]),e("div",Fo,[e("button",{type:"button",class:"btn-cancel",onClick:t[73]||(t[73]=(...i)=>o.closePhoneDialog&&o.closePhoneDialog(...i))},"取消"),t[184]||(t[184]=e("button",{type:"submit",class:"btn-save"},"确认绑定",-1))])],32)])])):v("",!0),n.showEmailDialog?(r(),a("div",{key:5,class:"dialog-overlay",onClick:t[84]||(t[84]=(...i)=>o.closeEmailDialog&&o.closeEmailDialog(...i))},[e("div",{class:"dialog-container",onClick:t[83]||(t[83]=F(()=>{},["stop"]))},[e("div",No,[e("h3",null,c(n.userInfo.email?"更换邮箱":"绑定邮箱"),1),e("button",{class:"dialog-close-btn",onClick:t[77]||(t[77]=(...i)=>o.closeEmailDialog&&o.closeEmailDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("form",{class:"dialog-form",onSubmit:t[82]||(t[82]=F((...i)=>o.changeEmail&&o.changeEmail(...i),["prevent"]))},[e("div",Ao,[t[185]||(t[185]=e("label",null,[h("邮箱地址 "),e("span",{class:"required"},"*")],-1)),y(e("input",{type:"email","onUpdate:modelValue":t[78]||(t[78]=i=>n.emailForm.email=i),placeholder:"请输入邮箱地址",required:""},null,512),[[P,n.emailForm.email]])]),e("div",So,[t[186]||(t[186]=e("label",null,[h("验证码 "),e("span",{class:"required"},"*")],-1)),e("div",To,[y(e("input",{type:"text","onUpdate:modelValue":t[79]||(t[79]=i=>n.emailForm.verificationCode=i),placeholder:"请输入验证码",required:""},null,512),[[P,n.emailForm.verificationCode]]),e("button",{type:"button",class:"send-code-btn",onClick:t[80]||(t[80]=(...i)=>o.sendEmailCode&&o.sendEmailCode(...i))}," 发送验证码 ")])]),e("div",Io,[e("button",{type:"button",class:"btn-cancel",onClick:t[81]||(t[81]=(...i)=>o.closeEmailDialog&&o.closeEmailDialog(...i))},"取消"),t[187]||(t[187]=e("button",{type:"submit",class:"btn-save"},"确认绑定",-1))])],32)])])):v("",!0),n.showPaymentDialog?(r(),a("div",{key:6,class:"dialog-overlay payment-overlay",onClick:t[93]||(t[93]=(...i)=>o.closePaymentDialog&&o.closePaymentDialog(...i))},[e("div",{class:"dialog-container payment-dialog compact-payment",onClick:t[92]||(t[92]=F(()=>{},["stop"]))},[e("div",Eo,[t[188]||(t[188]=e("h3",null,"支付订单",-1)),e("button",{class:"dialog-close-btn",onClick:t[85]||(t[85]=(...i)=>o.closePaymentDialog&&o.closePaymentDialog(...i))},[l(d,{icon:"mdi:close"})])]),e("div",_o,[e("div",xo,[e("div",Oo,[t[189]||(t[189]=e("span",{class:"order-label"},"订单号：",-1)),e("span",qo,c(n.currentPaymentOrder?.orderNo||n.currentPaymentOrder?.id),1)]),e("div",Mo,[t[190]||(t[190]=e("span",{class:"amount-label"},"支付金额",-1)),e("span",Uo,"¥"+c((n.currentPaymentOrder?.finalAmount||n.currentPaymentOrder?.total||0).toFixed(2)),1)])]),n.paymentStatus==="waiting"?(r(),a("div",Lo,[e("div",Vo,[t[194]||(t[194]=e("h4",null,"支付方式",-1)),e("div",Ro,[e("label",{class:w(["payment-option compact-option",{active:n.selectedPaymentMethod==="wechat"}])},[y(e("input",{type:"radio","onUpdate:modelValue":t[86]||(t[86]=i=>n.selectedPaymentMethod=i),value:"wechat"},null,512),[[x,n.selectedPaymentMethod]]),e("div",zo,[l(d,{icon:"mdi:wechat"})]),t[191]||(t[191]=e("span",null,"微信支付",-1))],2),e("label",{class:w(["payment-option compact-option",{active:n.selectedPaymentMethod==="alipay"}])},[y(e("input",{type:"radio","onUpdate:modelValue":t[87]||(t[87]=i=>n.selectedPaymentMethod=i),value:"alipay"},null,512),[[x,n.selectedPaymentMethod]]),e("div",Ko,[l(d,{icon:"simple-icons:alipay"})]),t[192]||(t[192]=e("span",null,"支付宝",-1))],2),e("label",{class:w(["payment-option compact-option",{active:n.selectedPaymentMethod==="unionpay"}])},[y(e("input",{type:"radio","onUpdate:modelValue":t[88]||(t[88]=i=>n.selectedPaymentMethod=i),value:"unionpay"},null,512),[[x,n.selectedPaymentMethod]]),e("div",Qo,[l(d,{icon:"mdi:credit-card"})]),t[193]||(t[193]=e("span",null,"银联支付",-1))],2)])]),e("div",Go,[e("div",Bo,[l(d,{icon:"mdi:qrcode"})]),e("p",Ho," 使用"+c(o.getPaymentMethodName(n.selectedPaymentMethod))+"扫码支付 ",1),e("div",{class:w(["payment-timer compact-timer",{"timer-warning":n.paymentTimeLeft<=180}])},[l(d,{icon:"mdi:clock-outline"}),e("span",null,c(o.formatPaymentTime(n.paymentTimeLeft)),1),n.paymentTimeLeft<=180?(r(),a("span",jo,"即将超时")):v("",!0)],2)])])):v("",!0),n.paymentStatus==="success"?(r(),a("div",Jo,[e("div",Yo,[l(d,{icon:"mdi:check-circle"})]),t[195]||(t[195]=e("h4",null,"支付成功！",-1)),t[196]||(t[196]=e("p",null,"订单已生成，我们将尽快为您处理",-1))])):v("",!0),n.paymentStatus==="waiting"?(r(),a("div",Wo,[e("div",Xo,[l(d,{icon:"mdi:information-outline"}),t[197]||(t[197]=e("span",null,'请在剩余时间内完成支付，支付完成后点击"确认已支付"',-1))])])):v("",!0),e("div",Zo,[n.paymentStatus==="waiting"?(r(),a("button",{key:0,class:"btn-confirm-payment",onClick:t[89]||(t[89]=(...i)=>o.confirmPayment&&o.confirmPayment(...i)),disabled:!n.selectedPaymentMethod},[l(d,{icon:"mdi:check"}),t[198]||(t[198]=h(" 确认已支付 ",-1))],8,$o)):v("",!0),n.paymentStatus==="success"?(r(),a("button",{key:1,class:"btn-view-order",onClick:t[90]||(t[90]=(...i)=>o.closePaymentDialog&&o.closePaymentDialog(...i))},[l(d,{icon:"mdi:eye"}),t[199]||(t[199]=h(" 查看订单 ",-1))])):v("",!0),n.paymentStatus==="waiting"?(r(),a("button",{key:2,class:"btn-cancel-payment",onClick:t[91]||(t[91]=(...i)=>o.cancelPayment&&o.cancelPayment(...i))},[l(d,{icon:"mdi:close"}),t[200]||(t[200]=h(" 取消支付 ",-1))])):v("",!0)])])])])):v("",!0)])}const nn=z(le,[["render",tn],["__scopeId","data-v-8a2633bb"]]);export{nn as default};
